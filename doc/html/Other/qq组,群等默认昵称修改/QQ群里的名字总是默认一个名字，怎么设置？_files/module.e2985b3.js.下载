;/*!question-new:widget/js/card/card.js*/
define("question-new:widget/js/card/card",function(s,a,i){function e(s){var a,i=s.user,e=s.imId,n=s.userName,t=s.uid,r=s.passPhoto,d=i.iconType,o=i.sex,c=i.gradeIndex,p=(i.gradeIndex,i.carefield),u=i.isFromTeam,b=i.teamName,v=i.teamId,g=(i.authTitle,i.isUserAdmin),f=(i.userAdminLevel,i.userAdminTitle),h=i.userAdminType,w=i.isFamous,k=i.isMaster,y=i.goodRate||0,x=i.grAnswerNum||0;a=s.encodeUid?"/usercenter?uid="+s.encodeUid:"http://www.baidu.com/p/"+n+"?from=zhidao";var T="";"2258746575"==t&&(T='log="bbzdFlag:2258746575,bbzdPos:answername"',a="http://baobao.baidu.com/",n="宝宝知道");var I='<div class="card-shadow line"><div class="user-card" id="user-card-'+e+'"><div class="line"><div class="grid avatar-79 avatar-radius mr-10"><a class="avatar-normal-a" alog-alias="qb-card-avatar" href="'+a+'" '+T+' target="_blank">';return I+="2258746575"==t?'<img class="avatar-normal-img" src="https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/baobaozhidao-icon.jpg" /></a></div>':1==r?'<img class="avatar-normal-img" src="http://himg.bdimg.com/sys/portrait/item/'+e+'.jpg" /></a></div>':'<img class="avatar-normal-img" src="http://img.iknow.bdimg.com/avatar/100/r'+d+"s"+o+"g"+c+'.gif" /></a></div>',I+='<div class="grid message-link-wp" style="float:left;width:79px;text-align:center;"><a class="message-link" target="_blank" href="/ichat/chatlist?concats='+n+'">私信TA</a></div>',I+='<div class="grid ml-10 user-card-right"><p class="card-name mb-5"><a href="'+a+'" class="user-name f-yahei v-middle" alog-alias="qb-card-uname" target="_blank" '+T+">"+n+'</a><a class="ml-5 i-gradeIndex iknow-qb_grade_icons i-gradeIndex-'+c+'" href="http://www.baidu.com/search/zhidao_help.html#如何选择头衔" alog-alias="qb-card-grade" target="_blank"></a>',"1"==w&&(I+='<a class="i-famous ml-5" title="知道名人" href="http://www.baidu.com/search/zhidao/userelite.html" alog-action="qb-card-icon" target="_blank"></a>'),"1"==k&&(I+='<a class="i-master ml-5" title="知道达人" href="http://www.baidu.com/search/zhidao/userelite.html" alog-action="qb-card-icon" target="_blank"></a>'),"1"==g&&(I+='<a href="http://zhidao.baidu.com/user/admin" alog-action="qb-card-icon" target="_blank" class="card-uadmin-icon i-uadmin-'+h+' ml-5" title="'+f+'"></a>'),I+='<p class="mt-5 mb-5 cnl"><span class="f-info">采纳率：</span><span>'+y+'%</span><span class="ml-20 f-info">采纳数：</span><span>'+x+"</span></p>","1704499689"==t||"2258746575"==t||(I+='<p class="mt-5 mb-5 cnl" style="word-break: break-all"><span class="f-info">擅长：</span>',p&&p.length?l.forEach(p,function(s){I+='<a class="mr-10" href="/browse/'+s.cid+'" target="_blank" alog-alias="qb-card-area">'+s.cname+"</a>"}):I+="<span>暂未定制</span>",I+="</p>",u&&b&&(I+='<p class="mt-5 mb-5 cnl"><span class="f-info">参与团队&nbsp;：</span><a class="card-team-name" href="/uteam/view?fr=qb&teamId='+v+'" target="_blank" alog-alias="qb-card-isteam">'+b+"</a></p>"),I+='<p class="mt-5 mb-5 cnl"><a alog-alias="qb-ask-user" class="fixed-ask fixed-ask-normal" username="'+n+'">求助知友</a></p></div></div>'),"1704499689"==t?I+='<div style="border-top: 1px solid #e8ecee;padding-top: 5px;margin-top: 8px;">Du知道君是知道站内的人工智能，会根据知道用户的观点和内容总结出特定问题的答案，为知道用户提供更好的问答体验。</div>':"2258746575"==t&&(I+='<div style="border-top: 1px solid #e8ecee;padding-top: 5px;margin-top: 8px;">中国最专业的母婴知识社区。面向备孕、孕期、0-6岁父母，与三甲医院联手提供定制化及可视化服务。</div>'),I=m.autoTrans(I,1)}function n(){l(".user-card").delegate(".fixed-ask","click",function(a){a.preventDefault();var i=this;s.async(["common:widget/js/logic/iask/iask"],function(s){s(l(i).attr("username"))})})}function t(s){var a=s.userName,i=s.user,e=s.imId,n=i.mavinName,t=i.mavinUname,r=i.mavinAnswerNum,d=i.mavinTitle,o=i.mavinAvatar,c=i.mavinIsBusiness,p=i.businessId,u=i.mavinAnswerViewNum,b=i.mavinAdoptNum,v=i.mavinFields&&i.mavinFields.join("、"),g=i.mavinDesc,f="",h="",w=l.string.getByteLength,k=l.string.subByte;n&&(f=w(n)>12?k(n,10)+"..":n),d&&(h=w(d)>10?k(d,8)+"..":d);var y=i.mavinMajor,x=i.mavinHelpNum,T=i.mavinPraise,I=i.mavinLevelDesc,N="i-mavin-big-trade";"1"===y&&(N="i-mavin-big-prof");var _="",q='<span class="'+N+'" title="'+I+'"></span>',j="",C=['<div class="mavin-answers-detail line">','<div class="item grid"><p>累计回答</p><p class="number ff-yahei">'+r+"</p></div>",c&&1===c?'<div class="item help-num grid"><p>累计采纳</p><p class="number ff-yahei">'+b+"</p></div>":'<div class="item help-num grid"><p>帮助的人</p><p class="number ff-yahei">'+x+"</p></div>",c&&1===c?'<div class="item grid"><p>回答浏览</p><p class="number ff-yahei">'+u+"</p></div>":'<div class="item grid"><p>收到的赞</p><p class="number ff-yahei">'+T+"</p></div>","</div>"].join(""),A="",F=['<div class="card-shadow line">','<div class="user-card mavin-card" id="user-card-'+e+'">','<div class="line mb-20">','<div class="grid avatar-79 '+j+' mr-10">','<a class="avatar-mavin-a" href="',i.mavinIsNew&&"1"===i.mavinIsNew?"/hangjia/profile/":"",i.mavinIsNew&&"1"!==i.mavinIsNew?"/mavin/view/":"",c&&1===c?"/business/profile?id="+p+'"':a+'?ie=utf-8"',' target="_blank">','<img class="avatar-mavin-img" src="'+o+'" />',"</a>","</div>",'<i class="mavin-icon '+_+'"></i>','<div class="grid f-aid ml-10 pl-10">','<p class="card-name">','<a href="',i.mavinIsNew&&"1"===i.mavinIsNew?"/hangjia/profile/":"",i.mavinIsNew&&"1"!==i.mavinIsNew?"/mavin/view/":"",c&&1===c?"/business/profile?id="+p+'"':a,'?ie=utf-8" class="f-black f-14 mr-10 ff-yahei" target="_blank" title="'+n+'">'+f+"</a>",c&&1===c?"":q,"</p>",v.length>0?v+'类行家<span class="f-pipe">|</span>'+d:"认证机构","</p>",c&&1===c?'<a class="mt-5 btn-22-green fixed-ask fixed-ask-mavin ff-yahei" href="/new?fix='+encodeURIComponent(a)+"&name="+encodeURIComponent(t)+"&id="+p+'" username="'+a+'">向TA咨询</a>':'<a class="mt-5 btn-22-green fixed-ask fixed-ask-mavin ff-yahei" username="'+a+'">向TA咨询</a>',"</div>",c&&1===c?'<div class="partner">知道合伙人</div>':"","</div>",'<div class="card-info ',A,' ">',C,'<p><span class="f-aid">'+g+"</span></p>","</div>","</div>","</div>"].join("");return F=m.autoTrans(F,1)}function r(s){var a=(s.userName,s.imId,s.user),i=a&&a.business&&a.business.businessId,e=(a&&a.business&&a.business.cid,a&&a.business&&a.business.imgUrl),n=a&&a.business&&a.business.intro,t=(a&&a.business&&a.business.main,a&&a.business&&a.business.name),r=(a&&a.business&&a.business.siteUrl,a&&a.business&&a.business.slogan),d=(a&&a.business&&a.business.uid,a&&a.business&&a.business.uname,a&&a.business&&a.business.insType),o=t&&t.length<13?t:t.slice(0,12)+"...",c="/new?fix="+t+"&name="+t+"&id="+i,l=['<div class="card-shadow line">','<div class="grid business-content-top clearfix">','<p class="avatar-70-border grid mr-15">','<a rel="nofollow" href="/business/profile?id='+i+'" target="_blank">','<img src="'+e+'"">',"</a>","</p>",'<div class="b-mid-wrap grid">','<p><a class="ff-yahei mr-10" href="/business/profile?id='+i+'" target="_blank">'+o+'</a><i class="iknow-qb_grade_icons ',2===d?"i-government-avatar-new":"i-company-avatar",'" title="'+t+'"></i></p>','<p class="mt-5 f-12">'+r+"</p>",'<p class="mt-5"><a class="btn-green-s b-chat-btn disabled f-14" href="'+c+'" target="_blank" data-businessid="'+i+'">向TA提问</a></p>',"</div>","</div>",'<div class="grid business-content-bottom">','<a href="/business/profile?id='+i+'" target="_blank">'+n+"</a>","</div>","</div>"].join("");return l=m.autoTrans(l,1)}function d(s){var a=s.user,i=a.siteLogo,e=(a.siteSlogan,a.app),n=a.siteUrl,t=a.companyIntro,r=l.string.getByteLength,d=l.string.subByte,o=280;t=r(t)>o?d(t,o-2)+"...":t;var c=['<div class="card-shadow opendev-shadow line">','<div class="user-card opendev-card">','<div class="">','<div class="top line">','<div class="grid avatar-70-border mr-10">','<a class="avatar-opendev-a opendev-log-a" href="',n,'" target="_blank">',"<span>",'<img class="avatar-opendev-img" src="',i,'" />',"</span>","</a>","</div>",'<div class="card-name-box grid f-aid">','<p class="card-name">','<a href="',n,'" class="f-black f-14 mr-10 ff-yahei opendev-log-a" target="_blank">',e,"</a>","</p>",'<p class="mt-10">','<a class="view-site grid btn-32-green opendev-log-a" target="_blank" href="',n,'">浏览官网</a>',"</p>","</div>","</div>",'<div class="card-info">','<p><span class="f-aid">',t,"</span></p>","</div>","</div>","</div>"].join("");return c=m.autoTrans(c,1)}function o(s){var a=s.user,i=(a.isUserAdmin,a.userAdminLevel,a.userAdminTitle),e=a.userAdminType,n="i-uadmin-big-"+e,t="转移标签",r="惊喜生日礼品、专属秒杀兑换、丰富月度奖励",d="right-box";"2"===e?t="转移标签、推荐回答":"3"===e?t="转移标签、推荐/加密回答、分拣问题":"4"===e&&(t="转移标签、推荐/加密回答等诸多权限",r="惊喜生日礼品、专属秒杀兑换、给力季度奖励");var o=['<div class="card-shadow line f-yahei">','<div class="user-card uadmin-icon-card line">','<div class="grid"><div class="',n,'"></div></div>','<div class="grid ',d,'">','<p class="title">',i,"</p>",'<div class="info">',"<p><span>权限：</span>",t,"<p><span>福利：</span>",r,"</p>","</div>","</div>","</div>","</div>"].join("");return o=m.autoTrans(o,1)}function c(s){var a=(s.userName,s.imId,s.user),i=a&&a.business&&a.business.businessId,e=(a&&a.business&&a.business.cid,a&&a.business&&a.business.imgUrl),n=a&&a.business&&a.business.intro,t=(a&&a.business&&a.business.main,a&&a.business&&a.business.name),r=(a&&a.business&&a.business.siteUrl,a&&a.business&&a.business.slogan),d=(a&&a.business&&a.business.uid,a&&a.business&&a.business.uname,a&&a.business&&a.business.type),o=t&&t.length<14?t:t.slice(0,12)+"...",c=r?r.length<15?r:r.slice(0,14)+"...":r,l=n&&n.length<61?n:n.slice(0,60)+"...",p="";r||(p="sloganEmpty");var u="i-business-normal";"2"===d&&(u="i-business-special");var b="/new?fix="+t+"&name="+t+"&id="+i,v=['<div class="business-content-top line">','<p class="avatar-69 grid mr-10">','<a href="/business/profile?id='+i+'" target="_blank">','<img src="'+e+'"">',"</a>",'<i class="',u,'" title="'+t+'"></i>',"</p>",'<div class="info grid ',p,'">','<p><a href="/business/profile?id='+i+'" target="_blank">'+o+'</a><i class="i-business" title="百度知道机构行家"></i></p>','<p class="slogan">'+c+"</p>",'<p><a class="btn-green-xxs bb-chat-btn disabled" href="'+b+'" target="_blank" data-businessid="'+i+'">向TA提问</a></p>',"</div>","</div>",'<div class="grid business-content-bottom">','<a href="/business/profile?id='+i+'" target="_blank">'+l+"</a>","</div>"].join("");return v=m.autoTrans(v,1)}var l=s("common:widget/js/util/tangram/tangram"),p=s("common:widget/js/ui/tip/tip"),u=s("common:widget/js/util/log/log"),m=(s("common:widget/js/util/event/event"),s("common:widget/js/util/https/https"));i.exports=function(s){var a=this,i=l(s.target),m=0==i.parents(".wgt-ask").length?i.parents(".wgt-replyer-best").prev(".wgt-ask"):i.parents(".wgt-ask"),b=0==i.parents(".answer").length?i.parents(".wgt-replyer-best").prev(".answer"):i.parents(".answer"),v={},g={};if(m.length)v=F.context("page");else if(b.length){var f=b.prop("id").split("-")[1];v=F.context("answers")[f]}if("pushMavin"==s.type){var h=i.data("uid");v=F.context("pushMavin")[h]}if("pushBusiness"==s.type&&(g=F.context("pushBusiness")[0]),"business"!=s.type&&"qbusiness"!=s.type&&!v.userName)return!1;var w={my:"left top+10",at:"left bottom"};"qbusiness"===s.type&&(w.my="left-40 top",w.at="left bottom+17");var k={tooltipClass:"ik-tip-card",direction:"top",position:w,width:"qbusiness"===s.type?275:"pushBusiness"===s.type?345:335,radius:!1,autoDispose:!1,target:i.eq(0)};switch("2258746575"==v.uid&&u.send({bbzdFlag:"2258746575",bbzdPos:"answername",bbzdFlagShow:!0}),s.type){case"business":k.content=r(v),k.tooltipClass+=" ik-tip-business-open",k.open=function(){this.getTipContainer().css({width:k.width+"px"}),l.ajax({url:"/business/submit/onbusinessbrowse",type:"POST",dataType:"json",data:{businessId:v.user.business.businessId,page:"3",token:F.context("businessToken"),qid:F.context("page").qid}}).done(function(){}).fail(function(){})};break;case"mavin":v.user.mavinIsNew&&u.addKey({mavinIsNew:1,mavinFields:(v.user.mavinFields||[]).join(",")}),k.tooltipClass+=" ik-tip-card-mavin",k.content=t(v),k.open=function(){n(v),this.getTipContainer().css({width:k.width+"px"})};break;case"pushMavin":v.user.mavinIsNew,k.tooltipClass+=" ik-tip-card-mavin",k.content=t(v),k.open=function(){n(v),this.getTipContainer().css({width:k.width+"px"})};break;case"pushBusiness":k.tooltipClass+=" ik-tip-card-business",k.content=t(g),k.open=function(){this.getTipContainer().css({width:k.width+"px"})};break;case"normal":k.content=e(v),k.open=function(){l(".user-card .card-uadmin-icon").on("click",function(){u.send({page:"question",area:"card-uadmin-icon",action:"click"})}),n(v),this.getTipContainer().css({width:k.width+"px"})};break;case"opendev":k.content=d(v),k.tooltipClass+=" ik-tip-card-opendev",k.open=function(){l(".opendev-card .opendev-log-a").on("click",function(){u.send({page:"question",area:"opendev-a",action:"click",srcName:v.user.srcName})}),this.getTipContainer().css({width:k.width+"px"})};break;case"uadminIcon":k.content=o(v),k.tooltipClass+=" ik-tip-card-uadmin",k.open=function(){this.getTipContainer.css({width:k.width+"px"})};break;case"qbusiness":k.content=c(v),k.tooltipClass+=" ik-tip-quality-business",k.open=function(){this.getTipContainer().css({width:k.width+"px"}),l.ajax({url:"/business/submit/onbusinessbrowse",type:"POST",dataType:"json",data:{businessId:v.user.business.businessId,page:"3",token:F.context("businessToken")}}).done(function(){}).fail(function(){})}}var y=timerHide=0,x=50;"qbusiness"===s.type&&(x=200),i.mouseenter(function(){l('div[role="tooltip"]').hide(),clearTimeout(timerHide),a.tip||(a.tip=new p(k),a.tip.getTipContainer().mouseenter(function(){clearTimeout(timerHide),y=setTimeout(function(){a.tip.show()},x)}).mouseleave(function(){clearTimeout(y),timerHide=setTimeout(function(){a.tip.hide()},x)})),y=setTimeout(function(){a.tip.show(),"opendev"===s.type&&u.send({page:"question",area:"opendev-card-open",action:"pv",srcName:v.user.srcName})},x)}).mouseleave(function(){clearTimeout(y),a.tip&&"show"==a.tip.getStatus()&&(timerHide=setTimeout(function(){a.tip.hide()},x))})}});
;/*!question-new:widget/js/evaluate/evaluate.js*/
define("question-new:widget/js/evaluate/evaluate",function(t,a,A){var i=t("common:widget/js/util/tangram/tangram"),o=t("common:widget/js/ui/base/base"),n=(t("common:widget/js/util/event/event"),t("common:widget/js/logic/submit/submit")),d=(t("common:widget/js/logic/login/login"),t("common:widget/js/util/log/log")),r=t("common:widget/js/logic/mini-editor/mini-editor"),u=t("common:widget/js/ui/dialog/dialog"),s=t("common:widget/js/util/store/store"),g=t("common:widget/js/ui/tip/tip"),c=o().extend({getEvaluteData:function(){var t=i.cookie.get("BAIDUID")?i.cookie.get("BAIDUID").split(":")[0]:0;return s.get("evaluate"+t)?s.get("evaluate"+t):!1},hasEvaluted:function(){return this.getEvaluteData()?i.array(this.getEvaluteData().split(",")).contains(this.currentData+"|good")?(this.hasGood=!0,!0):i.array(this.getEvaluteData().split(",")).contains(this.currentData+"|bad")?(this.hasBad=!0,!0):!1:!1},init:function(){var t=this;t.target=i(t.target),t.replyId=t.target.attr("id").replace(/[^\d]/g,""),t.qid=F.context("answers")[t.replyId].qid,t.isLogin=F.context("user").isLogin,t.currentData=[t.qid,t.replyId].join("|"),t.goodTarget=t.target.find("#evaluate-"+t.replyId),t.badTarget=t.target.find("#evaluate-bad-"+t.replyId),t.gootNumTarget=t.goodTarget.find(".evaluate-num"),t.goodNum=t.goodTarget.data("evaluate"),t.badNum=t.badTarget.data("evaluate"),t.hasGood=t.goodTarget.find(".icon-evaluate").hasClass("icon-evaluated"),t.hasBad=t.badTarget.find(".icon-evaluate-bad").hasClass("icon-evaluated-bad"),t.hasGoodTarget=t.target.find(".wgt-eva-hasgood"),t.hasBadTarget=t.target.find(".wgt-eva-hasbad"),t.hasEvaluted()&&(t.goodTarget.addClass("evaluated"),t.badTarget.addClass("evaluated")),t.isEvaluated=t.goodTarget.hasClass("evaluated")||t.hasEvaluted(),t.gootNumTarget.text(t.goodNum>0?t.goodNum:"赞"),t.isEvaluated&&(t.hasGood&&t.goodTarget.find(".icon-evaluate").addClass("icon-evaluated"),t.hasBad&&t.badTarget.find(".icon-evaluate-bad").addClass("icon-evaluated-bad")),t._bind()},_bind:function(){var t=this;t.target.mouseenter(function(){t.isEvaluated&&t.hasGood&&(t.hasGoodTarget.show(),t.inHover=!0),t.isEvaluated&&t.hasBad&&(t.hasBadTarget.show(),t.inHover=!0)}).mouseleave(function(){t.inHover&&(t.hasGoodTarget.hide(),t.hasBadTarget.hide(),t.inHover=!1)}),t.goodTarget.click(function(a){a.preventDefault(),t.isEvaluated||t.hasEvaluted()||(t.submit(),d.send({type:2014,action:"evaluate",page:"question",pos:"good",first:i(this).hasClass("evaluate-32")?1:0,rid:t.replyId}))}),t.on("commentsubmit",function(){u.alert("感谢反馈！",{width:"130px",className:"evaluate-tip-success"}),i(".ui-widget-overlay").hide(),setTimeout(function(){u.close()},1500)}),t.on("tipload",function(){var a=t.tip.getTipContainer(),e=new r({target:a.find(".tip-comment-editor").get(0),maxLength:15,defaultContent:"",width:206});t.editor=e,e.on("focus",function(){a.find(".comment-alert").eq(0).html("").hide()}),e.on("submit",function(){var a=this.getContent();return a==this.defaultContent||""===i.string.trim(a)?void u.alert("您输入的评论内容为空"):void t.submitComment(a)}),a.find(".btn-24-white").click(function(){e.fire("submit")}),t.on("commentsubmit",function(){t.tip.hide()})}),t.badTarget.click(function(a){a.preventDefault(),t.isEvaluated||t.hasEvaluted()||(t.submitBad(),d.send({type:2014,action:"evaluate",page:"question",pos:"bad",first:i(this).hasClass("evaluate-32")?1:0,rid:t.replyId}))})},submit:function(){var t=this;new n({params:{cm:100669,qid:t.qid,aid:t.replyId,type:1},autoRefresh:!0,beforeJump:function(){t.isEvaluated=!0,t.hasGood=!0,t.goodTarget.addClass("evaluated"),t.badTarget.addClass("evaluated"),t.goodTarget.find(".icon-evaluate").addClass("icon-evaluated").css({color:"#fff"}),t.numScroll(t.goodTarget),t.currentData+="|good";var a=i.cookie.get("BAIDUID")?i.cookie.get("BAIDUID").split(":")[0]:0,e=t.getEvaluteData()?[t.getEvaluteData(),t.currentData].join(","):t.currentData;s.set("evaluate"+a,e)}})},submitBad:function(){var t=this;new n({params:{cm:100680,qid:t.qid,aid:t.replyId,type:2},autoRefresh:!0,beforeJump:function(){t.isEvaluated=!0,t.hasBad=!0,t.goodTarget.addClass("evaluated"),t.badTarget.addClass("evaluated"),t.badTarget.find(".icon-evaluate-bad").addClass("icon-evaluated-bad"),t.currentData+="|bad";var a=i.cookie.get("BAIDUID")?i.cookie.get("BAIDUID").split(":")[0]:0,e=t.getEvaluteData()?[t.getEvaluteData(),t.currentData].join(","):t.currentData;s.set("evaluate"+a,e),t.showTip({header:"评价成功",defaultType:"button",tooltipClass:"evaluate-tip-dialog",type:2,tipText:[{text:"反对回答",num:5},{text:"与事实不符",num:6},{text:"答非所问",num:1},{text:"内容陈旧",num:2}]})}})},numScroll:function(t){var a=this;t=t.find(".evaluate-num").size()?t.find(".evaluate-num").eq(0):t;var e=parseInt("赞"===t.text()?0:t.text())+1;t.html(e);var A="data:image/gif;base64,R0lGODlhUABQAKIHAE3JcUTHaDvGYVHGdm7VikPOY0rKbf///yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTU3MTc3NkY2RUZEMTFFODkwNDJDRTJCRUM0MTYzRkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTU3MTc3NzA2RUZEMTFFODkwNDJDRTJCRUM0MTYzRkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFNTcxNzc2RDZFRkQxMUU4OTA0MkNFMkJFQzQxNjNGRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFNTcxNzc2RTZFRkQxMUU4OTA0MkNFMkJFQzQxNjNGRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV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",o=new Image,n=i(o);n.addClass("icon-evaluate-gif"),a.target.append(n),o.src=A,setTimeout(function(){n.remove(),o=null,n=null,a.goodTarget.find(".icon-evaluate").addClass("icon-evaluated").css({color:"#4aca6d"})},500)},showTip:function(t){var a=this,A=i.extend({skin:"evaluate-tip",header:"",footer:"",container:"",target:a.goodTarget,defaultType:"text"},t||{}),o=['<div class="#{skin}">','<div class="tip-header">#{header}</div>',"#{container}",'<ul class="line evaluate-text f-12" alog-group="qb-zan-quick"></ul>',"#{footer}","</div>"].join(""),n={my:"left top",at:"right bottom"};a.tip=new g({tooltipClass:A.tooltipClass,position:n,closebox:!0,direction:"top",effect:!1,autoDispose:!1,content:i.string(o).format(A),target:A.target}),a.tip.show();var r=a.tip.getTipContainer(),u=A.tipText,s=r.find("ul").empty(),c=i(window).scrollTop();r.find(".tip-header").html(A.header),i(u).each(function(t,a){"text"==A.defaultType?s.append('<li><a data-num="'+a.num+'" href="#">'+a.text+"</a></li>"):"button"==A.defaultType&&s.append(t%2!=0?'<li class="odd"><a data-num="'+a.num+'"title="'+a.text+'" href="#">'+a.text+"</a></li>":'<li><a data-num="'+a.num+'"title="'+a.text+'" href="#">'+a.text+"</a></li>")}),r.find("ul li a").click(function(t){t.preventDefault(),a.submitComment(i(this).data("num"),A.type),d.send({type:2014,action:"evaluate",page:"question",tipsType:A.type,pos:"evaluate-tips-tag",rid:a.replyId}),a.tip.hide()});var l=function(t){!a.tip.getTipContainer().size()||i.contains(a.tip.getTipContainer().get(0),t.target)||i.contains(A.target.get(0),t.target)||(a.tip.hide(),i(document).unbind("click",l))};return i(document).on("click",l),i(window).on("scroll",function(){Math.abs(i(window).scrollTop()-c)>300&&(!a.tip.getTipContainer().size()||i.contains(a.tip.getTipContainer().get(0),e.target)||i.contains(A.target.get(0),e.target)||a.tip.hide())}),a.fire("tipload"),a.tip},submitComment:function(t,a){var e=this;if(""!=t){var A="/submit/ajax",i={qid:e.qid,aid:e.replyId,cm:"100712",num:t,type:a};new n({url:A,params:i,syncId:"evaluateComment",autoRefresh:!1,beforeJump:function(){e.fire("commentsubmit",a)}})}}});A.exports=c});
;/*!question-new:widget/js/comment/comment.js*/
define("question-new:widget/js/comment/comment",function(e,t,n){function a(e,t){var n=t._getElement("body").empty(),a=F.context("answers")[t.replyId];if(!(e.total_count>0))return t.target.html(g+"评论"),void t.container.addClass("no-comment");if(t.target.html(g+"评论(<em>"+e.total_count+"</em>)"),t.container.removeClass("no-comment"),e.data&&e.data.length>0)if(t.curPageData={firstReplyId:parseInt(e.data[0].reply_id,10),lastReplyId:parseInt(e.data[e.data.length-1].reply_id,10),currentPn:t.pn,total:e.total_count,count:e.response_count},0==t.pn&&(t.firstPageData=o.object.clone(t.curPageData)),o.each(e.data,function(i,r){var s,c,d=o("<div/>").addClass("comment-entry f-12"),m=o.string((r.title.indexOf("#")>0?"":r.title)+r.content).decodeHTML().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;"),l=!!a.user&&!!a.user.openSiteId&&a.user.openSiteId==r.reserved3;r.user_name.indexOf("#")>1?c=s="热心网友":l?(c=o.string(a.user.openSiteName).encodeHTML(),s='<a class="f-light comment-entry-userface" href="'+a.user.openSiteUrl+'" target="_blank"><img src="'+p.autoTrans("https://gss0.bdstatic.com/70cFsj3f_gcX8t7mm9GUKT-xh_/avatar/100/r6s2g1.gif")+'"/></a><a class="f-light comment-entry-username" href="'+a.user.openSiteUrl+'" target="_blank">'+c+"</a>"):(s=['<a class="f-light comment-entry-userface" href="/usercenter?uid='+r.encodeUid+'" target="_blank"><img src="'+p.autoTrans(r.user_avatar)+'"/></a><a class="f-light comment-entry-username" href="/usercenter?uid='+r.encodeUid+'" target="_blank">',o.string(r.user_name).encodeHTML(),"</a>"].join(""),c=r.user_name),d.html(['<div class="details f-aid">',s,'<span class="comment-entry-time">',o.date.format(new Date(1e3*r.create_time),"yyyy-M-d HH:mm"),"</span>","</div>",'<div class="comment-content">',m,'<a class="reply-comment ml-5 f-light" href="#">回复</a>',"</div>"].join("")),n.append(d),0==i&&d.addClass("first"),i==e.data.length-1&&d.addClass("last");var u=F.context("user").name==r.user_name?1:0,g="1"==a.isCurrentUser?1:0,h=(1==F.context("user").isAdmin&&(10010==F.context("user").adminLevel||10011==F.context("user").adminLevel||10012==F.context("user").adminLevel),F.context("user").internalAdmin),f=h&&h.bitAuth||{};if(u||g||f.comment_delete){var v=o('<div class="comment-admin grid-r"/>').prependTo(d),b=o('<a href="#" class="comment-delete" title="删除这条评论"><i class="ikonw-qb-new-icon"></i></a>').click(function(e){e.preventDefault(),t.remove(r.reply_id)}).appendTo(v).hide();f.user_band&&o('<a href="#" class="mr-5"/>').html("封禁用户").click(function(e){e.preventDefault(),window.open("/misc/usermanager?un="+o.url.escapeSymbol(r.user_name)+"&ie=gbk")}).prependTo(v),f.comment_delete?b.show():d.mouseover(function(){b.show()}).mouseout(function(){b.hide()})}d.find(".reply-comment").on("click",function(e){e.preventDefault(),t.editor.setContent("回复 "+c+"： "),t.replyToUser=r.user_name,t.replyToId=r.reply_id,t.replyTosUser=l?c:"";var n=t.editor.getElement("textarea"),a=n.value.length-1;if(n.setSelectionRange)n.setSelectionRange(a,a);else if(n.createTextRange){var i=n.createTextRange();i.move("character",a),i.select()}o(n).change(),n.focus();var a=t.container.offset();o("body").scrollTop()>a.top&&window.scroll(0,a.top-30)})}),e.total_count>t.rn){var r=o("<p/>").addClass("comment-pager pager h-center pt-5 pb-15").attr("id",t.guid+"page");r.appendTo(n),i(t)}else o(".comment-body .comment-entry.last").css("padding-bottom","30px")}function i(e){function t(t,n,i){var r='<a href="#"/>';o(r).html(t).addClass(i).click(function(t){t.preventDefault(),e.getPageData(n)}).appendTo(a)}function n(n){(2===n||3===n)&&(t("",c-d,"pager-pre"),t(1,0,"pager-item"),a.append('<span class="pager-dot">...</span>'));for(var i=p;g>i;i++)i==l-1?o('<b class="pager-now" />').addClass("mr-5").html(i+1).appendTo(a):t(i+1,i*d,"pager-item");(1===n||2===n||3===n)&&(3!==n&&(a.append('<span class="pager-dot">...</span>'),t(u,(u-1)*d,"pager-item")),l!=u&&t("",c+d,"pager-next")),0!==n&&(a.append(['<span class="pager-total">共'+u+"页，跳至</span>",'<input class="pager-jump" type="text" maxlength="4"/>','<button class="pager-jump-confirm">确定</button>'].join("")),e.jumpInput=a.find(".pager-jump"),a.find(".pager-jump-confirm").click(function(){var t=/^\d+$/,n=e.jumpInput.val(),a=Number(n);t.test(n)&&parseInt(n)===a&&a>=1&&u>=a&&e.getPageData((a-1)*d)}))}var a=e._getElement("page").empty(),i=4,r=4,s=5,c=e.pn,d=e.rn,m=e.curPageData.total;if(d>=m)return"";var l=Math.floor(c/d)+1,u=Math.ceil(m/d),p=0,g=u;return u>s?l+r>u?(p=u-r,g=u,n(3)):i>=l?(p=0,g=i,n(1)):(p=l-2,g=l+1,n(2)):n(0),a}var o=e("common:widget/js/util/tangram/tangram"),r=e("common:widget/js/ui/base/base"),s=e("common:widget/js/util/event/event"),c=(e("common:widget/js/logic/login/login"),e("question-new:widget/js/evaluate/evaluate"),e("common:widget/js/logic/authcode/authcode")),d=e("common:widget/js/logic/submit/submit"),m=e("common:widget/js/ui/dialog/dialog"),l=e("question-new:widget/mini-editor/mini-editor"),u=e("common:widget/js/util/log/log"),p=e("common:widget/js/util/https/https"),g='<i class="ikonw-qb-new-icon qb-comment-icon"></i>',h=r().extend({_getElement:function(e){return o("#"+this.guid+(e||this.name))},getStatus:function(){return"none"==this.container.css("display")?"hide":"show"},getElement:function(e){return this._getElement(e).get(0)},init:function(){function e(e,t,a){return o("<"+e+"/>").attr("id",n.guid+t).addClass(a)}function t(){var t=[];o.browser.ie&&o.browser.ie<9&&t.push('<b class="tl"></b><b class="tr"></b><b class="bl"></b><b class="br"></b>'),n.container=e("div",n.name,"comment-area").hide().append('<div class="comment-area-triangle"></div>').append(t.join("")).append(e("div","inner","comment-area-inner"));var a=n.target.parents(".content");1==a.find(".forward-reply").size()?a.find(".editor").after(n.container):0==a.find(".admin-panel").before(n.container).size()&&a.after(n.container),0==n.dispNum&&n.container.addClass("no-comment");var i=n._getElement("inner");i.append(e("div","comment-wrap","comment-action-wrap"));var r=i.find(".comment-action-wrap");n.editor=new l({target:r,defaultContent:"写下你的评论……",onsubmit:function(){r.find(".comment-submit").hasClass("comment-submit-disabled")||n.submit()},onfocus:function(){n.authcode=n.authcode||new c({container:n.getElement("bar"),from:"new_comment",className:"mt-5"}),s.fire("comment.focus",n),r.find(".mini-editor").css({borderColor:"#9eacb6"}),r.find("textarea").attr("placeholder",""),r.find(".mini-editor").width(490),490!==r.find("textarea").width()&&r.find("textarea").width(440),r.find(".comment-submit").show()},onblur:function(){r.find(".mini-editor").css({borderColor:"#c6d1d9"}),r.find("textarea").attr("placeholder","写下你的评论……"),0===o.trim(r.find("textarea").val()).length&&(r.find(".mini-editor").width(580),r.find("textarea").width(530),r.find(".comment-submit").hide())},onchange:function(){var e=r.find("textarea"),t=r.find(".textarea-copy");t.text(e.val()),t.height()>e.height()+10&&(e.height()/20<2&&440===e.width()?(e.width(490),t.width(470)):e.height(t.height())),t.height()<e.height()-10&&e.height(t.height()),e.height()/20<2&&490===e.width()&&(t.width(420),t.height()/20<2?e.width(440):t.width(470)),0!=o.trim(r.find("textarea").val()).length?r.find(".comment-submit").removeClass("comment-submit-disabled"):r.find(".comment-submit").addClass("comment-submit-disabled")}}),r.find("textarea").on("input",function(){var e=r.find("textarea"),t=r.find(".textarea-copy");t.text(e.val()),t.height()>e.height()+10&&(e.height()/20<2&&440===e.width()?(e.width(490),t.width(470)):e.height(t.height())),t.height()<e.height()-10&&e.height(t.height()),e.height()/20<2&&490===e.width()&&(t.width(420),t.height()/20<2?e.width(440):t.width(470))}),r.find(".mini-editor-limit").html("0/200").show(),r.append('<div class="textarea-copy"></div>');var d=F.context("user").imId;if(d){var m="https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/"+d+".jpg";r.prepend('<img class="comment-currentUser-image" src="'+m+'"/>')}else r.prepend('<span class="comment-currentUser-image-default"></span>');r.append(e("div","bar","comment-action-bar line")),e("div","action","comment-action grid-r mt-10 mb-10").append(e("a","submit","comment-submit comment-submit-disabled").prop({href:"#",title:"按 Ctrl+Enter 发布评论"}).html("发表").click(function(e){e.preventDefault(),o(this).hasClass("comment-submit-disabled")||n.submit()}).attr({"alog-action":"qb-comment-submit","data-realName":n.realName})).appendTo(n._getElement("bar")),i.append(e("div","body","comment-body line"))}var n=this;n.name="comment-area",n.rn=3,n.pn=0,n.target=o(o.isString(n.target)?"#"+n.target:n.target),n.replyId=n.target.attr("id").replace(/[^\d]/g,""),n.dispNum=F.context("answers")[n.replyId].hasComment||0,n.realName=F.context("user").isRealName,n.threadId=F.context("answers")[n.replyId].threadId||0,n.target.click(function(e){n.container||t(),"hide"==n.getStatus()?n.show():n.hide(),u.send({type:2014,action:"comment",page:"question"}),e.preventDefault()}).mousemove(function(){o(this).addClass("comment-hover")}).mouseout(function(){o(this).removeClass("comment-hover")})},show:function(){var e=this;s.fire("replyask.close",e.replyId),s.fire("adopt.close",e.replyId),s.on("comment.close",function(t,n){e.replyId==n&&e.hide()}),e.once("dataloaded",function(){e._getElement("loading").hide(),o(e.getElement()).slideDown(300,function(){var t=e.container.css("height","").offset().top,n=e.container.outerHeight(),a=o(window).height();o(window).scrollTop()+a-t<n&&window.scroll(0,n+t-a+10)})}),e.curPageData?e.fire("dataloaded"):(e.getElement("loading")||o("<div/>").prop({className:"comment-loading",id:e.guid+"loading"}).html('<img src="'+p.autoTrans("https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/ask/loading.gif")+'" width="20" height="20" alt="loading..." />').insertBefore(e.container),e.getPageData())},getPageData:function(e){var t=this;t.pn=e||0;var n=o.url.jsonToQuery({method:"get_reply",app:"qb",thread_id:parseInt(t.threadId,10),start:t.pn,limit:t.rn,r:(new Date).getTime()});o.get("/api/comment?"+n,function(e){a(e,t),t.fire("dataloaded"),t.fire("show")},"json")},hide:function(){var e=this;o(e.getElement()).slideUp(300)},submit:function(){var e=this,t=e.editor.getContent();if(commentLen=e.editor.countByte?o.string(t).getByteLength():t.length,restLen=e.editor.maxLength-commentLen,t==e.editor.defaultContent)return void m.alert('<p class="h-center">您输入的评论内容为空</p>');if(!(0>restLen)){var n={qid:F.context("answers")[e.replyId].qid,aid:e.replyId,content:t,cun:e.replyToUser||"",cid:e.replyToId||""};!!e.replyTosUser&&o.extend(n,{sun:e.replyTosUser}),e.authcode&&e.authcode.submitParam(n),s.fire("login.check",{isLogin:function(t){if(1===t.isRealName&&0==o("#passport-accRealName-pop").length)s.fire("login.realName",{onSubmitSuccess:function(){new d({url:"/submit/comment/reply/?encoding=gbk",syncId:"commentReply",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(t,n){return n.content&&"null"!==n.content?(u.send({type:2014,action:"comment-submit",page:"question"}),e.editor.setContent("").change(),e.replyToUser="",e.replyToId="",e.replyTosUser="",e.once("dataloaded",function(){var t=e.container.find(".first").get(0);o(t).fadeIn(function(){t.style&&t.style.zoom&&(t.style.zoom="1")})}),e.getPageData(0),void(e.authcode&&(e.authcode.dispose(),e.authcode=null))):void m.alert("可能含有不适当发表的内容哦，修改后再提交吧~")},authcode:e.authcode||null})}});else if(1===t.isRealName&&o("#passport-accRealName-pop").length>0)o("#passport-accRealName-pop").show(),o("body").children("div:first-child").show();else{new d({url:"/submit/comment/reply/?encoding=gbk",syncId:"commentReply",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(t,n){return n.content&&"null"!==n.content?(u.send({type:2014,action:"comment-submit",page:"question"}),e.editor.setContent("").change(),e.replyToUser="",e.replyToId="",e.replyTosUser="",e.once("dataloaded",function(){var t=e.container.find(".first").get(0);o(t).fadeIn(function(){t.style&&t.style.zoom&&(t.style.zoom="1")})}),e.getPageData(0),void(e.authcode&&(e.authcode.dispose(),e.authcode=null))):void m.alert("可能含有不适当发表的内容哦，修改后再提交吧~")},authcode:e.authcode||null})}},noLogin:function(){s.fire("login.log",{onLoginSuccess:function(t){if(1!==t.isRealName){new d({url:"/submit/comment/reply/?encoding=gbk",syncId:"commentReply",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(){u.send({type:2014,action:"comment-submit",page:"question"});var t=location.href;t.match("#")&&(t=t.split("#")[0]),/[?|&]from=\w+/.test(location.search)&&(t=t.split("?")[0]),t=t.match(/\?/)?t+"&from=commentSubmit":t+"?from=commentSubmit",setTimeout(function(){location.href=t+"#answers"+e.replyId},1500)}})}}})}})}},remove:function(e){{var t=this;m.confirm('<div class="h-center">确定要删除该评论吗？</div>',{width:360,height:150,title:"知道提示",onaccept:function(){var n={qid:F.context("answers")[t.replyId].qid,aid:t.replyId,cid:e};s.fire("login.check",{isLogin:function(){new d({url:"/submit/comment/drop/",syncId:"commentDrop",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(){s.fire("dialog.close");var e=t.pn;t.curPageData.count<=1&&(e=e&&e-t.rn),t.curPageData=o.object.clone(t.firstPageData),t.getPageData(0>e?0:e)}})}})}})}}});n.exports=h,n.exports.getCount=function(){function e(){if(location.hash){var e=location.hash.replace(/[^\d]/g,"");-1!=location.search.indexOf("from=comment")&&o("#comment-"+e).click()}}var t=[],n={},a=[];if(o(".comment").each(function(e,i){var o=i.id.replace(/[^\d]/g,""),r=F.context("answers")[o],s=r.threadId;n[s]=parseInt(o,10),1==parseInt(r.hasComment,10)&&(t.push({thread_id:parseInt(s,10),reply_id:0,query_mask:999}),a.push(s))}),t.length){var i=o.url.jsonToQuery({method:"get_reply_count",app:"qb",thread_id:a.join(",")});o.get("/api/comment?"+i,function(t){if(t&&t.res)for(var i=0;i<t.res.length;i++){var r=o("#comment-"+n[a[i]]);t.res[i].total_count>0&&r.size()&&r.html(g+"评论(<em>"+t.res[i].total_count+"</em>)")}e()},"json")}}});
;/*!question-new:widget/js/ed2k/ed2k.js*/
define("question-new:widget/js/ed2k/ed2k",function(e,n,t){var i=e("common:widget/js/util/tangram/tangram"),a=e("common:widget/js/util/log/log"),o=(e("common:widget/js/logic/login/login"),e("common:widget/js/util/event/event")),d=(e("common:widget/js/util/uri/uri"),e("common:widget/js/ui/dialog/dialog"));window.bdplayerUa=F.context("page").bdplayer;var l,r,c=!!location.href.match(/video=/),p=function(e){var n=i.Deferred();return i.sio(e).callByBrowser(function(){n.resolve()}),n.promise()},s=-1,u=function(e){var n=null;try{n=new ActiveXObject("ThunderAgent.Agent")}catch(t){try{n=new ActiveXObject("ThunderAgent.Agent.1")}catch(t){}}if(n)try{return n.CallAddTask(e,"","",1,"",""),!0}catch(t){try{return n.AddTask(e,"","","","",1,1,10),n.CommitTasks(),!0}catch(t){}}try{var i=navigator.mimeTypes["application/np_xunlei_plugin"],a=document.createElement("embed");if(a.style.visibility="hidden",a.type="application/np_xunlei_plugin",a.width=0,a.height=0,document.body.appendChild(a),i&&a.DownLoadByThunderPlugin)return a.DownLoadByThunderPlugin(e),!0}catch(t){}return!1},m=function(e,n,t){var e=e.replace(/[^\x00-\xff]/g,encodeURIComponent);try{e=decodeURIComponent(e),n=decodeURIComponent(n),done()}catch(i){l||(l=p("https://gss0.bdstatic.com/70cFsj3f_gcX8t7mm9GUKT-xh_/question/gbk-url.js")),l.done(function(){try{e=GBK_URL.decode(e),n=GBK_URL.decode(n)}catch(i){}t({ed2kLink:e,filename:n})})}},k=function(){var n=i(".ed2k-wrap");n.size()&&a.send({type:2065,page:"qb_ed2k",action:"ed2k_pv",referrer:document.referrer}),n.each(function(n,t){var o=i(t).data("link"),l=i(t).data("filename");displayLink=o.replace(/[^\x00-\xff]/g,encodeURIComponent),displayLink=displayLink.substr(0,150)+"...";var r=['<div class="ed2k-con">','<a class="ed2k-link">',i.string(displayLink).encodeHTML(),"</a>",'<a class="btn-24-white btn-play"><span>在线播放<i></i></span></a>',"</div>"].join("");c||(r+='<p class="f-12 f-gray ed2k-comment">请<a class="baidu-player-link" target="_blank" href="http://player.baidu.com/player3/index.html?tn=141">下载百度影音</a>在线播放，或<a class="ed2k-copy-link" data-clipboard-text="'+i.string(o).encodeHTML()+'" href="'+i.string(o).encodeHTML()+'">复制链接</a>，使用其他软件进行下载。</p>'),i(t).html(r),m(o,l,function(e){i(t).data("link",e.ed2kLink),i(t).data("filename",e.filename)}),e.async(["common:widget/js/ui/clipboard/clipboard.min"],function(e){var n=new e(i(t).find(".ed2k-copy-link")[0]);n.on("success",function(e){d.alert("链接已复制到剪贴版"),a.send({type:2065,page:"qb_ed2k",action:"ed2k_copy_link_click"}),e.clearSelection()}),n.on("error",function(){d.alert("复制失败")})})})};t.exports.init=function(){i(function(){i.browser.ie&&i.browser.ie<=6?setTimeout(function(){k()},300):k()}),i("#qb-content").on("click",".ed2k-wrap .baidu-player-link",function(){a.send({type:2065,page:"qb_ed2k",action:"baidu_player_click"})}).on("mousedown",".ed2k-wrap .btn-play",function(){a.send({type:2065,page:"qb_ed2k",action:"ed2k_play_click",referrer:document.referrer})}).on("mousedown",".ed2k-wrap .ed2k-link",function(){a.send({type:2065,page:"qb_ed2k",action:"ed2k_link_click",referrer:document.referrer})}).on("click",".ed2k-wrap .ed2k-link, .ed2k-wrap .btn-play",function(n){n.preventDefault();var t=i(n.target).closest(".ed2k-wrap");r||(window.BdParam={},i('<div id="Bdobj" style="width: 0px;height: 0px;"></div><div id="callbdplay" style="width: 0px;height: 0px;"></div>').appendTo("body"),r=p("http://php.player.baidu.com/bdplayer/com_install.js")),r.done(function(){if(bdplayer.url=t.data("link"),bdplayer.title=t.data("filename"),-1==s&&(s=bdplayer.IsInstall()),s)return void setTimeout(function(){bdplayer.ClientPlay(t.data("link"),t.data("filename"))},1e3);if(bdplayer.VerUp)d.alert("为给您更好的观影体验，请下载最新版百度影音进行观赏。",{buttons:{items:[{text:"下载",click:function(){window.open("http://player.baidu.com/player3/index.html?tn=141"),o.fire("dialog.close")}}],align:"center",enable:!0}});else{if(u(t.data("link")))return;new d({title:"知道提示",content:'<div class="ed2k-dialog">您可以选择：<br/>1. 下载百度影音，直接在线播放；<br/>2. 复制链接，使用其他软件进行下载。</div>',autoDispose:!0,buttons:{items:[{text:"下载百度影音",btnClass:"btn-32-green",click:function(){window.open("http://player.baidu.com/player3/index.html?tn=141"),o.fire("dialog.close")}},{text:"复制链接",btnClass:"btn-32-silver btn-dialog-copy"}],align:"center",enable:!0},width:400,height:180}),i(".btn-dialog-copy").attr("data-clipboard-text",t.data("link")),e.async(["common:widget/js/ui/clipboard/clipboard.min"],function(e){var n=new e(i(".btn-dialog-copy")[0]);n.on("success",function(e){o.fire("dialog.close"),d.alert("链接已复制到剪贴版"),e.clearSelection()}),n.on("error",function(){d.alert("复制失败")})})}})})}});
;/*!question-new:widget/js/file/file.js*/
define("question-new:widget/js/file/file",function(e,t,n){function a(e){o("file").each(function(t,i){var n,a=o(i),s=a.parentsUntil(".answer").parent(".answer"),u=s&&s.attr("id").match(/\d+/)[0],g=a.parent().hasClass("replyask-content")?a.parent().attr("id").match(/\d+/)[0]:0,h=a.attr("fsid")||"",m=a.attr("wealth")||0,w=a.attr("link"),v=o.url.getQueryValue(w,"shareid"),x=o.url.getQueryValue(w,"uk"),j=g>0?g:u;if(!e||e.errno)n=['<div class="file line mt-10 f-12 file-fail">','<span class="ml-10 mr-5">附件加载失败，请</span>','<a target="_self" href="javascript:window.location.reload();">点击刷新</a>',"</div>"].join("");else{var M=!1;o(e.data).each(function(e,t){var a=t.fileMeta&&t.fileMeta.fs_id&&t.shareMeta&&0==t.shareMeta.errno&&0==t.shareMeta.status;if(a){if(t.fileMeta.fs_id==h){M=!0;var s=t.fileMeta,w=s.server_filename.split("."),y=s.server_filename;n=['<div class="file line mt-10 f-12">','<div class="file-inner clearfix">','<a href="#" target="_blank" class="grid mr-10 fileIcon-big ',b(w[w.length-1]),'"></a>','<div class="info grid file-dw-info">',"<p>",'<a href="#" target="_blank" class="f-yahei" title="',o.string.encodeHTML(y),'">',o.string.encodeHTML(l(y,26)),'</a><span class="f-gray ml-10">大小：',_(s.size),"</span>"],m>0&&"1"!=F.context("user").isAsker&&n.push('<span class="f-pipe">|</span><span class="f-gray">所需财富值：'+m+"</span>"),n.push('</p><p class="f-gray p-last f-green"><i class="i-solid-ok"></i> 已经过百度安全检测,放心下载'),n.push('</p></div><a class="grid-r btn-42-file-down-new" target="_blank" href="#">'),n.push('<i class="i-file-down"></i>'),n.push("<div><b>点击下载</b></div></a>"),n.push("</div></div>"),n=n.join(""),F.context("answer-file")[j]={error:!1,fileInfo:{fs_id:h,path:s.path,size:s.size,md5:s.md5,wealth:m}},o(i).parent().delegate(".file a","click",function(e){if(e.preventDefault(),m>0&&"1"!=F.context("user").isAsker&&"1"!=F.context("answers")[u].isCurrentUser){var t=function(e){var t=['<p class="mt-10 pl-10">',o.string.encodeHTML(l(s.server_filename,36)),'<span class="ml-10 f-aid">(',_(s.size),")</span><p>",'<div class="wealth-wraper"><p class="mb-10">下载所需财富值：<span class="f-bold">',m,"</span></p>","<p>您剩余的财富值：",e,"</p></div>"];return t.join("")},i=!1,n={type:2014,action:"click",module:"question",wealth:m,wealthLess:i};c.fire("login.check",{isLogin:function(){var e=F.context("user").wealth?parseInt(F.context("user").wealth,10):0;m>e&&(i=!0);{var a=i?'<span class="f-orange f-bold">'+e+'</span><a target="_blank" class="ml-10 f-12" href="http://www.baidu.com/search/zhidao_help.html#知道积分">如何赚取财富值</a>':'<span class="f-orange f-bold">'+e+"</span>",s=i?"btn-32-disabled":"btn-32-green",l=['<div class="tang-footer h-center mt-15"><a class="file-dbtn mr-10 btn ',s,'" href="#">下载</a>','<a class="file-cbtn ml-10 btn-32-white" href="#">取消</a></div>'].join(""),p=!1;new d({title:"下载文件",content:t(a)+l,width:460,height:260,buttons:[],open:function(){p||(p=!0,o(".tang-footer").delegate("a.file-dbtn","click",function(e){if(e.preventDefault(),r.send(o.extend(n,{pos:"accept-btn",isLogin:1})),!i){var t=window.open("about:blank"),a={cm:100675,qid:F.context("answers")[u].qid,rid:u,raid:g||0,fsid:h};c.fire("login.check",{isLogin:function(){new f({params:a,hasJump:!1,beforeJump:function(){k(v,x,function(e){t.location.href=e})}}),c.fire("dialog.close")}})}}),o(".tang-footer").delegate("a.file-cbtn","click",function(e){e.preventDefault(),c.fire("dialog.close"),r.send(o.object.extend(n,{pos:"cancel-btn",isLogin:1})),i&&location.reload()}),o(".tang-title").delegate("a.close-btn","click",function(){r.send(o.object.extend(n,{pos:"close-btn",isLogin:1})),i&&location.reload()}))}})}},noLogin:function(){d.confirm(t("登录后查看"),{title:"下载文件",width:460,height:260,buttons:[{text:"登录下载",click:function(){c.fire("login.log"),r.send(o.object.extend(n,{pos:"accept-btn",isLogin:0})),c.fire("dialog.close")}},{text:"取消",btnClass:"btn-32-white",click:function(){r.send(o.object.extend(n,{pos:"cancel-btn",isLogin:0})),c.fire("dialog.close")}}],open:function(){o(".tang-title").delegate("a.close-btn","click",function(){r.send(o.object.extend(n,{pos:"close-btn",isLogin:0}))})}})}})}else k(v,x,function(e){window.open(e)});r.send({type:2014,url:this.href,wealth:m,action:"click",pos:"file-download"})})}}else if(!M){p++;var L="1"==F.context("answers")[u].isCurrentUser?"您":"回答者",z="1"==F.context("answers")[u].isCurrentUser?"，请重新上传或删除。":"";n=['<div class="file line mt-10 f-12 file-fail">','<span class="fail">很抱歉，',L,"上传的附件已失效",z,"</span>","</div>"].join(""),F.context("answer-file")[j]={error:!0,fileInfo:{}}}})}var y=a.parents("dd"),L=y.attr("createTime"),z=!L&&""==o.string(y.text()).trim()||L&&o.string(y.text()).trim()==L;y.hasClass("replyask-content")&&(z||"删除"==o.string(y.text()).trim())&&(n="<br />"+n);var C=s.find(".wgt-wenku-link");C&&C.length>0&&(a.after(C),C.show());var T=a.parent(),q=o(n);a.after(q).remove();var U=T.data("oriheight");U&&T.data("oriheight",U+q.outerHeight(!0))})}function s(e){h.length&&o.ajax({url:"/api/pcs",type:"GET",data:{fsid:h.join(),uid:x.join(),shareid:m.join(),qid:v.join(),rid:w.join()},async:!0,dataType:"json",complete:function(t,i){if("success"==i){var n=o.json.parse(t.responseText);a(n)}else a();o.isFunction(e)&&e()}})}var o=e("common:widget/js/util/tangram/tangram"),r=e("common:widget/js/util/log/log"),l=e("common:widget/js/util/suffix-str/suffix-str"),c=e("common:widget/js/util/event/event"),f=e("common:widget/js/logic/submit/submit"),d=e("common:widget/js/ui/dialog/dialog");F.context("answer-file",{});var p=0,u=[],g=F.context("page").rankFile,h=[],m=[],w=[],v=[],x=[];o("file").each(function(e,t){if(!(e>9)){var i=o(t),n=i.parentsUntil(".answer").parent(".answer"),a=i.attr("fsid")||"",s=o.url.getQueryValue(i.attr("link"),"shareid"),r=n&&n.attr("id").match(/\d+/)[0],l=n&&F.context("answers")[r].qid,c=n&&F.context("answers")[r].uid||"";h.push(a),m.push(s),w.push(r),v.push(l),x.push(c),"0"==g?n.hasClass("answer-hide")||u.push(a):"1"==g&&(n.hasClass("answer-fold")||n.hasClass("answer-hide")||u.push(a))}});var b=function(e){e=e||"default";var t={icon_file_image:"jpg,jpeg,gif,bmp,png,jpe,cur,svg,svgz,tif,tiff,ico",icon_file_visio:"vsd,vsdx",icon_file_pdf:"pdf",icon_file_word:"doc,docx,ods,ots,odt,rtf,dot,dotx,odm",icon_file_excel:"xls,xlsx,xlt,xltx,csv",icon_file_text:"txt,html,htm,xhtml,xml,js,css",icon_file_music:"wma,wav,mp3,aac,ra,ram,mp2,ogg,aif,mpega,amr,mid,midi",icon_file_video:"wmv,rmvb,mpeg4,mpeg2,flv,avi,3gp,mpga,qt,rm,wmz,wmd,wvx,wmx,wm,swf,mpg,mp4,mkv,mpeg,mov",icon_file_powerpoint:"ppt,pptx,pps,pot,ppsx,potx",icon_file_ipa:"ipa",icon_file_exe:"exe,msi",icon_file_zip:"zip,rar,7z,tar,gz",icon_file_apk:"apk",icon_file_default:"default",icon_file_torrent:"torrent"},n={};for(i in t){var a=t[i].split(",");for(j in a)n.hasOwnProperty(a[j]),void 0==n[a[j]]&&(n[a[j]]=i)}return n[e.toLowerCase()]?n[e.toLowerCase()]:n["default"]},_=function(e){var t=["B","K","M","G","T"],i=Math.min(Math.max(Math.floor(Math.log(e)/Math.LN2/10),1),5);return Math.round(100*e/Math.pow(2,10*i))/100+t[i]},k=function(e,t,i){var n=["shareid="+e,"uk="+t].join("&");o.get("/api/pcsshorturl?"+n,function(e){"string"==typeof e&&(e=o.parseJSON(e)),0===e.errno&&i&&i(e.data.shortUrl)})};n.exports.init=s});
;/*!question-new:widget/js/select-search/select-search.js*/
define("question-new:widget/js/select-search/select-search",function(e,t,n){function o(e){l(e||document.body).mouseup(function(e){var t=e.button;if(l.browser.ie<9?1==t:0==t){var n=e.target.id;setTimeout(function(){var e=Boolean(window.getSelection),t=e?window.getSelection():document.selection.createRange();p=(e?t+"":t.text).replace(/\n+/g,"|");var o,i=p.length,s=e?i&&t.getRangeAt(0):t;return o=c(s,e),o&&"selectsearch-icon"!=n&&u.send({type:2014,page:"question",action:"selectSearchShow",qid:F.context("page").qid,uid:F.context("user").uid,text:p||""}),2>i||i>200||"selectsearch-icon"==n||!o?r():(a(s,e,o),void(s=t=null))},25)}})}function c(e,t){if(t){var n=i(e.startContainer),o=i(e.endContainer);return null===n||null===o||n!=o?!1:n}var c=e.parentElement(),a=i(c);return a}function i(e){return l(e).attr(d)?e:l(e).parents("["+d+"]").get(0)}function a(e,t){var n,o=l("#selectsearch-icon");if(t){o.size()?o.css({top:"auto",left:"auto",margin:"-25px auto auto 5px"}):o=l('<img id="selectsearch-icon"/>').attr({src:"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/qb/select-search.png",alt:"搜索"}),n=e.cloneRange(),n.collapse(!1),n.insertNode(o.get(0)),o.removeClass("selectsearch-hide");var c=o.offset().left,i=o.offset().top;l("body").append(o),o.css({top:i,left:c,margin:0}),n.detach()}else o.remove(),g=!1,n=e.duplicate(),n.collapse(!1),n.pasteHTML("<img id='selectsearch-icon' src='https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/qb/select-search.png' alt='搜索'/>");n=null,s()}function s(){g||(g=!0,l("#selectsearch-icon").click(function(){r(),u.send({type:2014,page:"question",action:"selectSearchClick",qid:F.context("page").qid,uid:F.context("user").uid,text:p||""}),window.open((window.supportHttps?"https:":"")+"//www.baidu.com/s?wd="+encodeURIComponent(p)+"&tn=SE_hldp00800_iw44c7tx&ie=utf-8&hl_tag=flayer")}))}function r(){l("#selectsearch-icon").addClass("selectsearch-hide").css({top:"auto",left:"auto",margin:"-25px auto auto 5px"})}var l=e("common:widget/js/util/tangram/tangram"),u=e("common:widget/js/util/log/log"),d="accuse",p="",g=!1,m=function(){o(l(".wgt-ask")),o(l(".answer"))};n.exports.init=m});
;/*!question-new:widget/js/thunder/thunder.js*/
define("question-new:widget/js/thunder/thunder",function(n,t){var e=n("common:widget/js/util/tangram/tangram"),i=n("common:widget/js/util/log/log"),a=(n("common:widget/js/util/event/event"),n("common:widget/js/util/uri/uri"),n("common:widget/js/ui/dialog/dialog")),c=function(n){var t=null;try{t=new ActiveXObject("ThunderAgent.Agent")}catch(e){try{t=new ActiveXObject("ThunderAgent.Agent.1")}catch(e){}}if(t)try{return t.CallAddTask(n,"","",1,"",""),!0}catch(e){try{return t.AddTask(n,"","","","",1,1,10),t.CommitTasks(),!0}catch(e){}}try{var i=navigator.mimeTypes["application/np_xunlei_plugin"],a=document.createElement("embed");if(a.style.visibility="hidden",a.type="application/np_xunlei_plugin",a.width=0,a.height=0,document.body.appendChild(a),i&&a.DownLoadByThunderPlugin)return a.DownLoadByThunderPlugin(n),!0}catch(e){}return!1},r=function(){var t=e(".thunder-wrap");t.size()&&i.addKey({hasThunder:1}),t.each(function(t,c){var r=e(c).data("link"),d=['<div class="thunder-con">','<a class="thunder-link cur-pointer" data-link="',r,'">',r,"</a>",'<a class="btn-24-white btn-thunder" data-link="',r,'">立即下载</a>',"</div>",'<p class="f-12 f-gray ed2k-comment">','请安装迅雷后点击下载，或<span class="thunder-copy-link f-blue" data-clipboard-text="',r,'">复制链接</span>进行下载。',"</p>"].join("");e(c).html(d),n.async(["common:widget/js/ui/clipboard/clipboard.min"],function(n){var t=new n(e(c).find(".thunder-copy-link")[0]);t.on("mousedown",function(){i.send({type:2014,page:"question",area:"thunder-copy",action:"click"})}),t.on("success",function(n){a.alert("链接已复制到剪贴版"),n.clearSelection()}),t.on("error",function(){a.alert("复制失败")})})})},d=function(n,t){i.send({type:2014,page:"question",area:n,action:"click"}),c(t)||a.alert("请安装迅雷后点击下载！")};t.init=function(){e(function(){e.browser.ie&&e.browser.ie<=6?setTimeout(function(){r()},300):r()}),e(".thunder-wrap").delegate(".thunder-link","click",function(n){n.preventDefault();var t=e(this).data("link");d("thunder-dw-link",t)}).delegate(".btn-thunder","click",function(n){n.preventDefault();var t=e(this).data("link");d("thunder-dw-btn",t)})}});
;/*!question-new:widget/ad-right/ad-right.js*/
define("question-new:widget/ad-right/ad-right",function(a){var o=a("common:widget/js/util/tangram/tangram"),t=a("common:widget/js/ui/carousel/carousel"),e=a("common:widget/js/util/log/log");a("common:widget/js/ui/lazyload/lazyload");var s,i,c=function(){!function(){var a,s=[],i=F.context("cmsRight");if("undefined"!=typeof i&&(!i||i.length)){e.addKey({cms_scroll_new:1}),o.each(i,function(a,o){if(o&&o.src){var t=['<a rel="nofollow" alog-alias="qb-cms-mask" log="page:question,pos:cms_scroll_new,index:',a,'" href="',o.url,'" target="_blank"',0!=a?' data-img="'+o.src+'"':"",">",0==a?'<img src="'+o.src+'" alt=""/>':"","</a>"].join("");s.push(t)}}),a=new t({items:s,controls:!0,indicators:!0,slide:function(a,t){var e=o(t.relatedTarget),s=e.find("a"),i=s.data("img");i&&s.html('<img src="'+i+'" alt=""/>')}}),a.render("#cms-mask");{var c=o("#cms-mask .carousel-misc"),n=o('<div class="cms-scroll-shadow"></div>').insertBefore(c),l=o("#cms-mask .carousel-control-left");o("#cms-mask .carousel-control-right")}l.css("left",(220-5*(2*i.length-1))/2+"px"),1==i.length&&(c.hide(),n.hide()),o("#cms-scroll").mouseenter(function(o){o.stopPropagation(),c.animate({top:110}),n.animate({top:110}),a.pause()}).mouseleave(function(o){o.stopPropagation(),c.animate({top:140}),n.animate({top:140}),a.cycle()}),o("#cms-scroll").click(function(){e.send({type:2014,page:"question",pos:"cms-scroll",action:"click"})}),o("#cms-company")&&e.addKey({cms_company:1}),o("#cms-company").click(function(){var a=o(this).find("a").attr("href"),t=a.indexOf("zhidao.baidu.com/liuyan");7===t&&e.send({type:2014,page:"question",pos:"cms-company-liuyan",action:"click"}),e.send({type:2014,page:"question",pos:"cms-company",action:"click"})})}}()},n=o(window),l=o("#wgt-ad-right-fixed"),m=l.offset().top,r=function(a,o,t){var e,s=(new Date).getTime();return function(){var i=(new Date).getTime();i-s>=t?(clearTimeout(e),s=i,a()):(clearTimeout(e),e=setTimeout(a,o))}};n.scroll(r(function(){var a=n.scrollTop(),t=o(".wgt-footer-new").offset().top,e=l.height(),c=e+55+a>t;a>m-55&&!s&&!c?(l.addClass("fixed"),l.css({bottom:"auto",top:"55px"}),s=!0):c?(l.addClass("fixed"),l.css({bottom:n.height()-t+a+"px",top:"auto"}),s=!1,i=!0):m-55>=a&&(s||i)&&(l.removeClass("fixed"),s=!1,i=!1)},50,55));var d=function(){var a=o(".cms-slide-optimus a").attr("data-img");o(".cms-slide-optimus a").append("<img src="+a+" />")};o(".cms-slide-lazy").lazyload({appear:c}),o(".cms-slide-optimus").lazyload({appear:d})});
;/*!question-new:widget/hao123/hao123.js*/
define("question-new:widget/hao123/hao123",function(t,o,i){{var e=t("common:widget/js/util/tangram/tangram"),a=t("common:widget/js/util/log/log"),n=t("common:widget/js/util/template/template");t("common:widget/lib/juicer/juicer")}i.exports={init:function(t){e.ajax({url:"/question/api/hao123word",dataType:"json",data:{word:t.word,title:F.context("page").title},success:function(t){t.errno||(e("#hao-lu-list").html(n("t:hao-lu-list",t)),a.send({module:"question",page:"question",area:"hao-lu-list",action:"pv"}))}}),e("#hao-lu-list").on("click",".hao-link",function(){a.send({module:"question",page:"question",area:"hao-lu-list",action:"click"})})}}});
;/*!question-new:widget/answers/answers.js*/
define("question-new:widget/answers/answers",function(e){function s(e,s,i){var n,a=(new Date).getTime();return function(){var o=(new Date).getTime();o-a>=i?(clearTimeout(n),a=o,e()):(clearTimeout(n),n=setTimeout(e,s))}}function i(){g.hasClass("folding")?(m&&(m.hide(),m.hasClass("folding")&&n()),h.addClass("answer-fold"),u.size()&&0==c.size()&&"0"==C&&u.hide(),g.removeClass("folding"),f.html('查看更多其他回答<span></span><i class="i-answer-more ml-5"></i>'),d.send({type:2014,area:"rank3",action:"foldclick"})):(m&&m.show(),r.scan(),h.removeClass("answer-fold").children().first().removeClass("line"),u.size()&&0==c.size()&&u.show(),g.addClass("folding"),f.html('收起<span></span><i class="i-shrink-up ml-5"></i>'),d.send({type:2014,area:"rank3",action:"showfoldclick"}))}function n(){m.hasClass("folding")?(c.addClass("answer-hide"),showAnswerDispute.size()?showAnswerDispute.hide():u.size()&&"0"==C&&u.hide(),m.removeClass("folding"),p.find("span").hide(),p.find("i").removeClass("i-incline-up"),d.send({type:2014,area:"rank3",action:"hideclick"})):(c.removeClass("answer-hide").children().first().removeClass("line"),showAnswerDispute.size()?(showAnswerDispute.show(),m.hide()):u.size()&&u.show(),m.addClass("folding"),p.find("span").show(),p.find("i").addClass("i-incline-up"),d.send({type:2014,area:"rank3",action:"showhideclick"}))}function a(){showAnswerDispute.hasClass("folding")?(disputeAnswer.addClass("answer-dispute-hide"),normalAnswer.size()==disputeAnswer.size()&&o("#wgt-answers .hd").addClass("hide"),u.size()&&"0"==C&&u.hide(),showAnswerDispute.removeClass("folding"),showHideDispute.find("span").hide(),showHideDispute.find("i").removeClass("i-incline-up"),d.send({type:2014,area:"rank3",action:"disputehideclick"})):(disputeAnswer.removeClass("answer-dispute-hide").children().first().removeClass("line"),normalAnswer.size()==disputeAnswer.size()&&o("#wgt-answers .hd").removeClass("hide"),u.size()&&u.show(),showAnswerDispute.addClass("folding"),showHideDispute.find("span").show(),showHideDispute.find("i").addClass("i-incline-up"),d.send({type:2014,area:"rank3",action:"disputeshowclick"}))}var o=e("common:widget/js/util/tangram/tangram"),t=e("question-new:widget/js/share/share"),r=e("question-new:widget/mavin-statistics/mavin-statistics"),d=e("common:widget/js/util/log/log"),l=o(window),w=o("#qb-content"),h=[],c=[],u=null,f=null,p=null,g=null,m=null,C=o.url.getQueryValue(location.search,"pn")||"0",v=o("#wgt-answers").find(".answer-text"),z=function(){v.each(function(e,i){var n=o(i),a=n.parents(".bd.answer"),r=n.find(".wgt-answers-mask"),h=a.find(".wgt-answers-operator");a.on("click",".wgt-answers-showbtn",function(){d.send({area:"show-hide-answer-normal",action:"click"}),n.data("showstatus","show"),n.data("preScrollPos",o(window).scrollTop()),n.height(n.data("oriheight")),r.hide(),h.find(".wgt-answers-hidebtn").show()}).on("click",".wgt-answers-hidebtn",function(){n.data("showstatus","hide"),n.height(340),r.show(),o(this).hide(),h.removeClass("fixed"),l.off("resize.answerOperatorFixed"+e),h.css("width","auto"),o(window).scrollTop()>n.data("preScrollPos")&&(F.context("answerFoldingFlag",!0),o(window).scrollTop(n.data("preScrollPos")),setTimeout(function(){F.context("answerFoldingFlag",!1)},500))}),o(window).scroll(s(function(){if("show"===n.data("showstatus")){var i=l.height(),a=l.scrollTop(),o=n.offset().top,t=i+a-o;t>300&&t<n.height()?(h.addClass("fixed"),h.width(w.outerWidth()),l.on("resize.answerOperatorFixed"+e,s(function(){h.width(w.outerWidth())},50,60))):(h.removeClass("fixed"),l.off("resize.answerOperatorFixed"+e),h.css("width","auto"))}},50,55)),t.init({target:"#"+a.attr("id")+" .share-area",pageUrl:"http://zhidao.baidu.com/question/"+F.context("page").qid,title:document.title,logOpt:{module:"question",page:"qb",project:"new-qb-share",postion:"new-share"}})}),0==o(".wgt-best,.wgt-recommend,.wgt-special").size()&&o(".wgt-answers").size()&&o("#wgt-answers").removeClass("answer-foldable"),h=o(".answer-foldable .answer-fold"),normalAnswer=o("#wgt-answers .answer"),c=o(".answer-hide"),disputeAnswer=o(".answer-dispute"),u=o(".wgt-pager"),o("#wgt-answers").size()&&c.size()==o("#wgt-answers .answer").size()&&0==o("#wgt-answers .answer-mine").size()&&("0"==C?F.context("user").isAsker||o("#wgt-answers").hide():o("#wgt-answers").addClass("reply-hide-only")),(h.size()||c.size())&&u.size()&&"0"==C&&u.hide(),h.size()&&(g=o('<div id="show-fold-container"/>').insertBefore(h.get(0)),f=o('<div id="show-answer-fold"/>').html('查看更多其他回答<span></span><i class="i-answer-more ml-5"></i>').appendTo(g),f.click(function(){i()}).mouseover(function(){o(this).addClass("hover")}).mouseout(function(){o(this).removeClass("hover")})),(c.size()||disputeAnswer.size())&&(m=o("#show-hide-container"),p=o("#show-answer-hide"),showAnswerDispute=o(".show-answer-dispute"),showHideDispute=o(".show-hide-dispute"),p.click(function(){n(),r.scan()}).mouseover(function(){o(this).addClass("hover")}),o(p).mouseout(function(){o(this).removeClass("hover")}),showHideDispute.click(function(){r.scan(),a()}),g&&m.hide());var e=o.url.getQueryValue(location.href,"loc_ans");if(e){var z=o("#wgt-answers .answer"),A=null;z.each(function(s,i){-1!=o(i).attr("id").indexOf(e)&&(A=o(i))}),A&&(locAnswerFold=A.hasClass("answer-fold")&&o("#wgt-answers").hasClass("answer-foldable"),locAnswerHide=A.hasClass("answer-hide"),locAnswerFold&&i(),locAnswerHide&&n(),setTimeout(function(){o(document).scrollTop(A.offset().top-70)},200))}else{var k=o("#wgt-answers .answer-mine").eq(0),D=k.size()?k.parent().attr("id"):null,b=D&&k.parent().hasClass("answer-fold")&&o("#wgt-answers").hasClass("answer-foldable");myAnswerHide=D&&k.parent().hasClass("answer-hide"),D&&!(b||myAnswerHide&&h.size())&&setTimeout(function(){o(document).scrollTop(k.offset().top-70)},200),myAnswerHide&&0==h.size()&&n()}o(".hide-other-answer").click(function(){o(this).hide(),o(".answer-other").show(),d.send({pms:"otherAnswer",type:2014});var e=o(".no-bd");e.each(function(){o(this).removeClass("no-bd")})}),o("#show-hide-container").size()&&d.addKey({show_hide_container:1});var y="i-incline-up",T="i-incline-down",q="quote-folded";o("#wgt-answers").on("click",".js-quote-fold",function(e){var s=o(e.target);s.toggleClass(T).toggleClass(y),s.parents(".js-quote").toggleClass(q)})};z()});
;/*!question-new:widget/ask/ask.js*/
define("question-new:widget/ask/ask",function(t,e,i){function o(){var t,e;n("#modify-category").on("click",function(i){i.preventDefault(),t?t.open():(t=a.confirm('<div id="dig-modify-category"></div>',{title:"修改分类",width:"465px",onaccept:function(){var i={cm:100015,qid:F.context("page").qid,cid_bef:F.context("page").cid,cid_aft:e.getValue().cid};return i.cid_bef==i.cid_aft?(t.close(),void a.alert("转移前后的分类相同噢...",{onaccept:function(){t.open()},close:function(){t.open()}})):void new s({url:"/submit/user",params:i,beforeJump:function(){t.close();var e=new a({width:350,height:160,title:"知道提示",content:"转移分类成功啦~~",autoDispose:!0,close:function(){window.location.reload(!0)}});setTimeout(function(){e.close()},2e3),n.cookie.set("IK_QB_ALTER",1)},syncId:"modifyCate",errorDeal:function(){t.close(),a.alert("转移分类失败了: (")}})}}),e=new c({target:"#dig-modify-category",defaultValue:F.context("page").cid,selectSize:16}))})}var n=t("common:widget/lib/jquery/jquery"),a=t("common:widget/js/ui/dialog/dialog"),c=t("common:widget/js/logic/category/category"),s=t("common:widget/js/logic/submit/submit"),d=t("common:widget/lib/juicer/juicer"),r=t("common:widget/js/util/log/log"),l=t("common:widget/js/util/tangram/cookie"),p=t("question-new:widget/js/share/share"),u=t("common:widget/js/util/webuploader/webuploader"),g=t("common:widget/js/util/https/https"),m=t("common:widget/js/util/event/event"),f=n("#recommond-pic-tpl").html(),h=n("#add-pic-confirm-tpl").html(),w=n("#local-upload-tpl").html(),v={init:function(t,e){var i=this;o(),i.formateAskContent(e),i.bindEvent(t)},formateAskContent:function(t){if("attention"===t.askContentType){var e=n(".wgt-ask .conReal"),i=n(".wgt-ask .conTemp"),o=n(".wgt-ask .expend");e.height()>48&&(e.removeClass().addClass("con-all"),i.removeClass("conTemp"),o.removeClass("expend_hide"))}n(".wgt-ask .q-content").css({visibility:"visible","max-height":"none"})},bindEvent:function(t){var e=this;n(".wgt-ask").on("click",".expend",function(){n(this).parent().find(".con").remove(),n(this).parent().find(".con-all").show(),n(this).remove()}),n(".wgt-ask .add-pic").on("click",function(){{var i='<input type="text" name="linkInput" class="link-input" placeholder="请输入图片地址" /><div class="error-msg"></div>';a.confirm(h,{title:"添加一张配图",width:"620px",className:"question-addPicDialog",autoDispose:!0,onaccept:function(){var t=n("input[name=localPicture]:checked").data("type"),e=F.context("page").qid,i=n("input[name=localPicture]:checked").parent().data("pid"),o=F.context("user").uid;return i?void m.fire("login.check",{isLogin:function(){r.send({module:"question",page:"ask",area:"add-question-pic",action:"pv",islogin:1,no_login_type:"submit"}),n.ajax({type:"post",url:"/submit/QuestionAddPic",data:{type:t,qid:e,pid:i,uid:o},dataType:"json",success:function(t){0===t.errorNo?setTimeout(function(){window.location.reload()},500):a.alert(t.errmsg)}})},noLogin:function(){r.send({module:"question",page:"ask",area:"add-question-pic",action:"pv",islogin:0,no_login_type:"submit"}),m.fire("login.log",{onLoginSuccess:function(){window.location.reload()}})}}):void a.alert("请选择一张图片")},open:function(){n("#dialog-picture-album").prepend(d(f,t)),n(".ui-dialog-titlebar-close").addClass("iknow-icons").addClass("iconfont-rough-close"),e.addImgUploader();var o=n("#dialog-picture-album"),c=n(".ui-dialog-content"),s=n(".preview-bg"),l=n(window).height(),p=c.find(".preview-container"),u=n(window).width();p.css({width:u,height:l}),s.css({width:u,height:l}),o.on("click",".select-btn",function(t){t.stopPropagation(),n(".select-btn").css({color:"#cfd7dc"}),n(this).css({color:"#4aca6d"}),n(this).find('input[name="localPicture"]').attr("checked",!0)}),o.on("click",".picture",function(){var t=n(this).data("src");c.find(".preview").attr("src",t),p.css({"z-index":9999}),p.show(),s.show();var e=n(".question-addPicDialog").find(".preview").height(),i=(l-e)/2;c.find(".preview").css({"margin-top":i})}),p.on("click",function(){n(this).css({"z-index":0}),n(this).hide(),s.hide()}),o.on("click",".add-pic-url",function(){var t=a.confirm(i,{title:"",width:"500px",className:"link-input-confirm",autoDispose:!0,buttons:[{text:"插入图片",click:function(){var e=n("input[name=linkInput]").val();return e?void m.fire("login.check",{isLogin:function(){r.send({module:"question",page:"ask",area:"add-question-pic",action:"pv",islogin:1,no_login_type:"copylink"}),n.ajax({type:"post",url:"/submit/ajax/",data:{cm:100682,picUrl:e},dataType:"json",success:function(e){var i=n(".add-pic-button"),o={pid:e.pid,type:2};"0"===e.errorNo&&e.url?setTimeout(function(){0===n(".local-upload").length?(i.addClass("add-pic-hover"),i.append(d(w,o))):n(".local-upload").attr("data-pid",e.pid);var a=n(".local-upload"),c=n(".add-pic-upload"),s=n(".add-pic-url"),r=a.find('input[name="localPicture"]');i.css({border:0,background:"url("+g.autoTrans(e.url)+") center no-repeat","background-size":"auto 100%"}),r.attr("checked",!0),n(".text-container").hide(),n(".select-btn").css({color:"#cfd7dc"}),a.css({color:"#4aca6d"}),r.attr("checked",!0),c.find("span").text("本地上传"),c.css({"border-bottom":0,"margin-top":"5px","padding-bottom":"10px"}),s.find("span").text("修改链接"),s.css({"margin-top":"5px"}),t.close()},500):n(".link-input-confirm").find(".error-msg").text("无法识别该链接")}})},noLogin:function(){r.send({module:"question",page:"ask",area:"add-question-pic",action:"pv",islogin:0,no_login_type:"copylink"}),m.fire("login.log",{onLoginSuccess:function(){location.reload()}})}}):void n(".link-input-confirm").find(".error-msg").text("请输入图片地址")}},{text:"取消",click:function(){t.close()}}]})})}})}})},addImgUploader:function(){var t=u.create({swf:"/static/swf/webuploader.swf",auto:!0,server:"/submit/ajax/",pick:{multiple:!1,id:"#add-img-btn"},resize:!1,formData:{cm:"100672"},duplicate:!0,fileVal:"image",accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/*"}});t.on("beforeFileQueued",function(t){var e=t.size>5242880;return e&&a.alert("啊哦，图片大小不能超过5M！"),!e}),t.on("uploadProgress",function(){n(".text-container").hide(),n(".is-loading").show(),n(".add-pic-button").css({background:"none"})}),t.on("uploadSuccess",function(t,e){var i=n(".add-pic-button");if(+e.errorNo)i.find(".is-loading").text("上传失败");else{var o={pid:e.pid,type:1};setTimeout(function(){i.css({background:"url("+g.autoTrans(e.url)+") center no-repeat","background-size":"auto 100%"}),0===n(".local-upload").length?(i.addClass("add-pic-hover"),i.append(d(w,o))):n(".local-upload").attr("data-pid",o),i.find(".is-loading").fadeOut("fast",function(){n(this).hide()});var t=n(".local-upload"),a=n(".add-pic-upload"),c=n(".add-pic-url");n(".select-btn").css({color:"#cfd7dc"}),t.css({color:"#4aca6d"}),t.find("input[name=localPicture]").attr("checked",!0),i.css({border:0}),a.find("span").text("重新上传"),a.css({"border-bottom":0,"margin-top":"5px","padding-bottom":"10px"}),c.find("span").text("复制链接"),c.css({"margin-top":"5px"})},500)}})}};n.get("/api/qbpv?q="+F.context("page").qid,function(t){t=parseInt(t,10);n("#v-times").html(" 浏览 "+t+" 次").show()});var k=F.context("cmsTopic"),b=F.context("answers");n(k).each(function(t,e){e.expert&&n(b).each(function(t,i){"undefined"!=typeof i.userName&&n.contains(e.expert.split(","),i.userName)&&(n("#cms-topic").size()?n("#cms-topic").attr("href",e.url).html(e.title):n("#ask-info").append('<span class="f-pipe">|</span> 相关专题：<a id="cms-topic" rel="nofollow" href="'+e.url+'" target="_blank">'+e.title+"</a>"))})}),p.init({target:n(".ask-info .share-area"),pageUrl:"http://zhidao.baidu.com/question/"+F.context("page").qid,title:document.title,logOpt:{module:"question",page:"qb",project:"new-qb-share",postion:"new-share"}}),n(".wgt-ask .offical-tip-close").click(function(){var t=n(this);t.parents(".official-tip").remove(),l.set("official_tip_"+F.context("page").qid,"1",{expires:2592e5})}),i.exports=v});
;/*!question-new:widget/push/push.js*/
define("question-new:widget/push/push",function(require,exports,module){var $=require("common:widget/js/util/tangram/tangram"),ec=require("common:widget/js/util/event/event"),log=require("common:widget/js/util/log/log"),Submit=require("common:widget/js/logic/submit/submit"),popTip=require("common:widget/js/ui/pop-tip/pop-tip"),AnswerDialog=require("question-new:widget/js/answer-dialog/answer-dialog"),Dialog=require("common:widget/js/ui/dialog/dialog"),https=require("common:widget/js/util/https/https"),cookieOption={path:"/",expires:"",domain:location.host.replace(/:\d+/,"")},dialogContent="";module.exports={init:function(){var me=this;me.authcode=null,me.wrapper=$(".wgt-push"),me.listTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");for(var i=0;i<list.length;i++)_template_fun_array.push('    <li class="line"  data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'">        <span class="push-item-el push-item smooth">            <span class="push-item-text-green">',"undefined"==typeof list[i].pv?"":baidu.template._encodeHTML(list[i].pv),'人</span>想知道:                    <a log="action:click,area:wgt-push-question,module:question,page:question" href="/question/',"undefined"==typeof list[i].qid?"":baidu.template._encodeHTML(list[i].qid),"?push=4&entry="),_template_fun_array.push("83001"===F.context("page").adsAll.adsEids.join(",")?"qb_qb_wait2refer_newpc_exp":4==i?"qb_qb_wait2refer_discuss":"qb_qb_wait2refer"),_template_fun_array.push('" target="_blank" class="push-item-link" title="',"undefined"==typeof list[i].title?"":baidu.template._encodeHTML(list[i].title),'">',"undefined"==typeof(list[i].title&&list[i].title.length>19?list[i].title.substr(0,18)+"...":list[i].title)?"":list[i].title&&list[i].title.length>19?list[i].title.substr(0,18)+"...":list[i].title,"</a>            "),list[i].score>0&&_template_fun_array.push('                <i class="iknow-icons wealth-icon push-item-el">&#xe652;</i>                <span class="wealth-span push-item-el">',"undefined"==typeof list[i].score?"":baidu.template._encodeHTML(list[i].score),"</span>            "),_template_fun_array.push("            "),list[i].hasPic&&_template_fun_array.push('                <i class="iknow-icons pic-icon push-item-el">&#xe65e;</i>            '),_template_fun_array.push('            <div class="push-item-btn"  data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'"><i class="iknow-icons">&#xe665;</i><span class="smooth">回答</span></div>        </span>    </li>');_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],me.dialogTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="wpi-close"><i class="iknow-icons">&#xe603;</i></div><div class="wpi-dialog-img"></div><p class="wpi-dialog-title">帮人解惑，奉献知识，收获快乐！</p><div class="wpi-title">新手礼包</div><ul class="wpi-ul">    ');for(var j=0;j<reward.length;j++)_template_fun_array.push('    <li class="wpi-li">        <a href="/ihome/homepage/mytask" target="_blank">            <img src="',"undefined"==typeof reward[j].imgUrl?"":baidu.template._encodeHTML(reward[j].imgUrl),'" alt="" class="wpi-li-img">            <div class="wpi-li-intro">                <span>',"undefined"==typeof reward[j].name?"":baidu.template._encodeHTML(reward[j].name),"</span>                <em>+","undefined"==typeof reward[j].value?"":baidu.template._encodeHTML(reward[j].value),"</em>            </div>        </a>    </li>    ");_template_fun_array.push('</ul><div class="wpi-next-wp">    <p><em>新手连续答题7天</em>还将获得</p>    <div class="wpi-next-award">        <span>890财富值</span>        <span>神秘礼物</span>    </div></div><div class="wpi-button-group">    <div class="wpi-button-confirm">我知道了</div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],me.fetchData(),me.bindEvents(),log.addKey({push:"1"})},fetchData:function(){var e=this;e.wrapper.find(".push-ul").addClass("hidden"),$.ajax({url:"/question/api/recommend",data:{t:+new Date},dataType:"json",type:"get"}).done(function(t){t&&"object"===$.type(t)&&(t.list&&t.list.length>0&&($.each(t.list,function(e,t){t.avatar=https.autoTrans(t.avatar)}),setTimeout(function(){e.renderList(t)},500)),""===dialogContent&&t.reward.length>0&&(dialogContent=e.dialogTmpl(t)))})},renderList:function(e){var t=this;t.wrapper.removeClass("hidden"),t.data=e.list,t.wrapper.find(".push-ul").html(t.listTmpl(e)).removeClass("hidden"),t.wrapper.find(".wgt-push-change").removeClass("loading")},bindEvents:function(){var e=this;e.wrapper.on("click",".push-item-btn",function(){var t=$(this);if(!t.hasClass("disable")){log.send({module:"question",page:"question",area:"qbview-bottom-wait-answer-submit",action:"click"});var a=t.data("index");if(e.data[a]){var i;i=4===a?"qb_qb_wait2_discuss":"qb_qb_wait2",e.dialog=new AnswerDialog({entry:i,data:e.data[a],callback:function(){log.send({module:"question",page:"question",area:"qbview-bottom-wait-answer-submit-success",action:"pv"}),popTip("提交成功，谢谢帮助"),t.find("span").text("已回答").parent().addClass("disable")}})}}}).on("click",".wgt-push-change",function(){$(this).hasClass("loading")||(log.send({module:"question",page:"question",area:"qbview-bottom-wait-answer-change",action:"click"}),$(this).addClass("loading"),e.fetchData())}).on("click",".wgt-push-intro",function(){if(""!==dialogContent){log.send({module:"question",page:"question",area:"wgt-push-intro",action:"click"});var e=new Dialog({width:480,className:"wgt-push-intro-dialog",content:dialogContent,closeOnEscape:!1,autoDispose:!0,open:function(){$(".wpi-close, .wpi-button-confirm").on("click",function(){e.close()})}})}})}}});
;/*!question-new:widget/value-comment/value-comment.js*/
define("question-new:widget/value-comment/value-comment",function(e,t,n){var o=e("common:widget/js/util/tangram/tangram"),i=e("question-new:widget/js/comment/comment"),m=e("question-new:widget/js/evaluate/evaluate"),a=e("common:widget/js/util/log/log");n.exports.init=function(e){var t=null,n=null,c=o("#comment-"+e),l=o("#wgt-eva-"+e);c.size()&&(t=new i({target:c})),l.size()&&(n=new m({type:0,target:l})),o(".comment").on("click",function(){a.send({type:2060,page:"qb",area:"comment",action:"click"})})}});
;/*!question-new:widget/related/related.js*/
define("question-new:widget/related/related",function(e,t,a){var d=e("common:widget/js/util/tangram/tangram"),i=e("common:widget/js/util/log/log"),n=(e("common:widget/js/util/event/event"),e("common:widget/js/logic/file-type/file-type")),o=e("question-new:widget/js/ck/ck");a.exports=function(e){d("#wgt-related .file-unknow-1").each(function(){var e=n(d(this).html()).fileClass;d(this)[0].className=e+"-1"}),e.relatedLogType&&i.addKey({relate_type:e.relatedLogType}),e.isRelatedLog&&i.addKey({piCount:d(".related-link-pi").size(),jxCount:d(".related-link-jx").size(),qyCount:d(".related-link-qy").size(),zdCount:d(".related-link-zd").size()}),i.addKey({relate:"1"});var t=[];d("#wgt-related a[data-qid]").each(function(){t.push(d(this).data("qid"))}),F.context("page").relateQids=t.join("_")};var l=d(".ec-oad","#wgt-related");if(l.size()){var s=i.parse(l.find("a").data("log")),r=l.data("href");r&&(r+="&attach="+encodeURIComponent("r="+s.si),i.log(r)),i.addKey({related_ecoad_show:1}),l.find("a").each(function(){this.href+=(2==s.st?"&us=":"&attach=")+encodeURIComponent("r="+s.si)}),o.bind(l);var c=l.data("oad");c&&(c=c.split("_"),i.addKey({oadqid:c[4]||"",oadpos:c[5]||""}))}});
;/*!question-new:widget/s-yesorno/s-yesorno.js*/
define("question-new:widget/s-yesorno/s-yesorno",function(e){var t=e("common:widget/js/util/tangram/tangram"),i=e("common:widget/js/ui/pie/pie"),o=e("common:widget/js/util/log/log");t(".pie-holder","#yn-tab").each(function(){var e=t(this),o=.01*parseInt(e.text()),n=e.find("em").css("color");e.prepend(new i({pieR:28,donutR:24,rotation:-90,strokeWidth:0,slices:[{color:n,percent:o},{color:"#E6E9E0",percent:1-o}]}).getNode())}),t("li","#yn-tab").click(function(){var e=t(this),i=e.data("type");if(!e.is(".cur,.disabled")){var n=e.addClass("cur bt-"+i).siblings(".cur");n.removeClass("cur bt-"+n.data("type")),t("#yn-list").children().hide(),t("#list-"+i).show(),o.send({action:"click",area:"yesno",pos:"tab",tab:i})}})});
;/*!question-new:widget/s-recommend/s-recommend.js*/
define("question-new:widget/s-recommend/s-recommend",function(e,n){var s=e("common:widget/js/util/tangram/tangram"),i=e("common:widget/js/util/log/log");n.init=function(){var e=s(".item-hide");s("#wgt-s-recommend .expand").on("click",function(){s(this).hasClass("collapse")?(s(this).removeClass("collapse"),e.hide(),s(this).find("span").text("展开更多")):(i.send({pos:"s_recommend_expand",action:"click",page:"qb-new"}),s(this).addClass("collapse"),e.show(),s(this).find("span").text("收起全部"))})}});
;/*!question-new:widget/js/left-promotion/left-promotion.js*/
define("question-new:widget/js/left-promotion/left-promotion",function(t,o,e){var i=t("common:widget/lib/jquery/jquery"),n=t("common:widget/js/ui/base/base"),s=t("common:widget/js/util/event/event"),c=t("common:widget/js/util/log/log"),l=t("common:widget/js/util/https/https"),r=n(function(t){var o=this,e={closeBtnOffset:{right:0,top:0}};i.each(i.extend(e,t),function(t,e){i.isFunction(e)&&o.on(t,e)}),e.height=e.height||120,e.width=e.width||80,o.opt=e}).extend({init:function(){var t=this,o=i(".qb-section");setTimeout(function(){var e=t.opt.height,n=t.opt.width;i("<div/>").prop({"class":"left-promotion",id:"left-promotion"}).html(['<div class="close-layer"></div>','<img src="'+l.autoTrans(t.opt.imgSrc)+'"/>'].join("")).css({left:o.offset().left-n,top:.95*(i(window).height()-e),width:n,height:e}).appendTo("#body"),i("#left-promotion .close-layer").css(t.opt.closeBtnOffset),t.eventHandler()},1500)},eventHandler:function(){var t=this,o=i(".qb-section"),e=t.opt.height,n=t.opt.width;i(window).on("resize",function(){var t=.95*(i(window).height()-e);i(".bottom-ask-con").size()&&(t=.95*(i(window).height()-e-100)),i("#left-promotion").css({left:o.offset().left-n,top:t})}),i(".left-promotion").click(function(o){var e=i(o.target).closest(".close-layer").size(),n={type:2015,pos:e>0?"left-promotion-close":"left-promotion-click",action:"click",uname:F.context("user").name};i.extend(n,t.opt.log),c.send(n),e?t.close():t.opt.url&&window.open(t.opt.url,"_blank")}),s.on("bottomAsk.show",function(){i("#left-promotion").css({top:.95*(i(window).height()-e-100)})}),s.on("bottomAsk.hide",function(){i("#left-promotion").css({top:.95*(i(window).height()-e)})})},close:function(){i("#left-promotion").remove()}});e.exports=r});
;/*!question-new:widget/js/getInfo/getInfo.js*/
define("question-new:widget/js/getInfo/getInfo",function(r,n,t){function o(r){var n,t,o,e,f,i,a,c,s,l=Array(),A=7,w=12,x=17,p=22,y=5,I=9,b=14,j=20,q=4,L=11,k=16,z=23,B=6,D=10,E=15,F=21;for(r=m(r),l=v(r),i=1732584193,a=4023233417,c=2562383102,s=271733878,n=0;n<l.length;n+=16)t=i,o=a,e=c,f=s,i=g(i,a,c,s,l[n+0],A,3614090360),s=g(s,i,a,c,l[n+1],w,3905402710),c=g(c,s,i,a,l[n+2],x,606105819),a=g(a,c,s,i,l[n+3],p,3250441966),i=g(i,a,c,s,l[n+4],A,4118548399),s=g(s,i,a,c,l[n+5],w,1200080426),c=g(c,s,i,a,l[n+6],x,2821735955),a=g(a,c,s,i,l[n+7],p,4249261313),i=g(i,a,c,s,l[n+8],A,1770035416),s=g(s,i,a,c,l[n+9],w,2336552879),c=g(c,s,i,a,l[n+10],x,4294925233),a=g(a,c,s,i,l[n+11],p,2304563134),i=g(i,a,c,s,l[n+12],A,1804603682),s=g(s,i,a,c,l[n+13],w,4254626195),c=g(c,s,i,a,l[n+14],x,2792965006),a=g(a,c,s,i,l[n+15],p,1236535329),i=C(i,a,c,s,l[n+1],y,4129170786),s=C(s,i,a,c,l[n+6],I,3225465664),c=C(c,s,i,a,l[n+11],b,643717713),a=C(a,c,s,i,l[n+0],j,3921069994),i=C(i,a,c,s,l[n+5],y,3593408605),s=C(s,i,a,c,l[n+10],I,38016083),c=C(c,s,i,a,l[n+15],b,3634488961),a=C(a,c,s,i,l[n+4],j,3889429448),i=C(i,a,c,s,l[n+9],y,568446438),s=C(s,i,a,c,l[n+14],I,3275163606),c=C(c,s,i,a,l[n+3],b,4107603335),a=C(a,c,s,i,l[n+8],j,1163531501),i=C(i,a,c,s,l[n+13],y,2850285829),s=C(s,i,a,c,l[n+2],I,4243563512),c=C(c,s,i,a,l[n+7],b,1735328473),a=C(a,c,s,i,l[n+12],j,2368359562),i=h(i,a,c,s,l[n+5],q,4294588738),s=h(s,i,a,c,l[n+8],L,2272392833),c=h(c,s,i,a,l[n+11],k,1839030562),a=h(a,c,s,i,l[n+14],z,4259657740),i=h(i,a,c,s,l[n+1],q,2763975236),s=h(s,i,a,c,l[n+4],L,1272893353),c=h(c,s,i,a,l[n+7],k,4139469664),a=h(a,c,s,i,l[n+10],z,3200236656),i=h(i,a,c,s,l[n+13],q,681279174),s=h(s,i,a,c,l[n+0],L,3936430074),c=h(c,s,i,a,l[n+3],k,3572445317),a=h(a,c,s,i,l[n+6],z,76029189),i=h(i,a,c,s,l[n+9],q,3654602809),s=h(s,i,a,c,l[n+12],L,3873151461),c=h(c,s,i,a,l[n+15],k,530742520),a=h(a,c,s,i,l[n+2],z,3299628645),i=d(i,a,c,s,l[n+0],B,4096336452),s=d(s,i,a,c,l[n+7],D,1126891415),c=d(c,s,i,a,l[n+14],E,2878612391),a=d(a,c,s,i,l[n+5],F,4237533241),i=d(i,a,c,s,l[n+12],B,1700485571),s=d(s,i,a,c,l[n+3],D,2399980690),c=d(c,s,i,a,l[n+10],E,4293915773),a=d(a,c,s,i,l[n+1],F,2240044497),i=d(i,a,c,s,l[n+8],B,1873313359),s=d(s,i,a,c,l[n+15],D,4264355552),c=d(c,s,i,a,l[n+6],E,2734768916),a=d(a,c,s,i,l[n+13],F,1309151649),i=d(i,a,c,s,l[n+4],B,4149444226),s=d(s,i,a,c,l[n+11],D,3174756917),c=d(c,s,i,a,l[n+2],E,718787259),a=d(a,c,s,i,l[n+9],F,3951481745),i=u(i,t),a=u(a,o),c=u(c,e),s=u(s,f);var G=S(i)+S(a)+S(c)+S(s);return G.toLowerCase()}var e=function(r,n){return r<<n|r>>>32-n},u=function(r,n){var t,o,e,u,f;return e=2147483648&r,u=2147483648&n,t=1073741824&r,o=1073741824&n,f=(1073741823&r)+(1073741823&n),t&o?2147483648^f^e^u:t|o?1073741824&f?3221225472^f^e^u:1073741824^f^e^u:f^e^u},f=function(r,n,t){return r&n|~r&t},i=function(r,n,t){return r&t|n&~t},a=function(r,n,t){return r^n^t},c=function(r,n,t){return n^(r|~t)},g=function(r,n,t,o,i,a,c){return r=u(r,u(u(f(n,t,o),i),c)),u(e(r,a),n)},C=function(r,n,t,o,f,a,c){return r=u(r,u(u(i(n,t,o),f),c)),u(e(r,a),n)},h=function(r,n,t,o,f,i,c){return r=u(r,u(u(a(n,t,o),f),c)),u(e(r,i),n)},d=function(r,n,t,o,f,i,a){return r=u(r,u(u(c(n,t,o),f),a)),u(e(r,i),n)},v=function(r){for(var n,t=r.length,o=t+8,e=(o-o%64)/64,u=16*(e+1),f=Array(u-1),i=0,a=0;t>a;)n=(a-a%4)/4,i=a%4*8,f[n]=f[n]|r.charCodeAt(a)<<i,a++;return n=(a-a%4)/4,i=a%4*8,f[n]=f[n]|128<<i,f[u-2]=t<<3,f[u-1]=t>>>29,f},S=function(r){var n,t,o="",e="";for(t=0;3>=t;t++)n=r>>>8*t&255,e="0"+n.toString(16),o+=e.substr(e.length-2,2);return o},m=function(r){r=r.replace(/\x0d\x0a/g,"\n");for(var n="",t=0;t<r.length;t++){var o=r.charCodeAt(t);128>o?n+=String.fromCharCode(o):o>127&&2048>o?(n+=String.fromCharCode(o>>6|192),n+=String.fromCharCode(63&o|128)):(n+=String.fromCharCode(o>>12|224),n+=String.fromCharCode(o>>6&63|128),n+=String.fromCharCode(63&o|128))}return n};t.exports={init:o}});
;/*!question-new:widget/js/phone-search/phone-search.js*/
define("question-new:widget/js/phone-search/phone-search",function(e,t,n){var i=e("common:widget/lib/jquery/jquery"),o=e("common:widget/js/ui/tip/tip"),s=e("common:widget/js/util/log/log"),a={replace:function(e,t){if(e&&!(e.length<=0)){var n=e.html();i.each(t,function(e,t){var o=i.trim(t.previous_phone),s=t.pure_phone,a=new RegExp("("+o+'(?!<i class="searcher"|" title="searcher">))',"gi");n=n.replace(a,'<span class="phone-number-searcher-wp">$1<i class="searcher" data-pure_number="'+s+'" title="searcher"><img src="https://gss0.bdstatic.com/7051cy89RsgCncy6lo7D0j9wexYrbOWh7c50/phonesearch.png"></i></span>')}),e.html(n),e.find(".phone-number-searcher-wp .searcher img").hover(function(){var e=i(this).parents(".searcher"),t=e.data("pure_number");i.ajax({url:"/api/phonecheck?tel=",type:"GET",dataType:"json",data:{tel:t}}).done(function(n){if(!(n.errno>0)){var i=n.data&&n.data.response&&n.data.response[t],s="";"report"==i.type?(s+='<div class="phone-number-tip-content report">',s+='<div class="logo"></div>',s=s+'<div class="text first"><span>疑似'+i.name+":</span> "+t+"</div>",s=s+'<div class="text sencond"> 被'+i.count+"人标记为“"+i.name+"”</div>"):"poi"==i.type?(s+='<div class="phone-number-tip-content poi">',s+='<div class="logo"></div>',s=s+'<div class="text first"><span>'+i.name+":</span> "+t+"</div>"):i.location&&i.location.province?(s+='<div class="phone-number-tip-content normal">',s+='<div class="logo"></div>',s=s+'<div class="text first"><span>普通号码:</span> '+t+"</div>",s=s+'<div class="text sencond">'+i.location.province+i.location.city+" | "+i.location.operators+"</div>"):(s+='<div class="phone-number-tip-content unknow">',s+='<div class="logo"></div>',s+='<div class="text first"> 该号码查不到任何信息</div>',s=s+'<div class="text sencond">'+t+"</div>"),s+="</div>",e[0].phoneNumberTip=new o({tooltipClass:"phone-number-searcher-tip",target:e,direction:"bottom",arrow:!1,content:s,position:{my:"left top",at:"right bottom"}})}}),s.send({module:"question",page:"detail",area:"phone-search",action:"search"})},function(){var e=i(this).parents(".searcher");e[0].phoneNumberTip&&e[0].phoneNumberTip.hide()})}}};n.exports=a});
;/*!question-new:widget/back-insert/back-insert.js*/
define("question-new:widget/back-insert/back-insert",function(t){var i=t("common:widget/js/util/tangram/tangram"),n=t("common:widget/js/util/log/log");i("#wgt-back-insert .qb-title").click(function(){n.send({type:2014,page:"question",pos:"back_insert_title",action:"click"})}),i("#wgt-back-insert .show-all").click(function(){n.send({type:2014,page:"question",pos:"back_insert_all",action:"click"})})});
;/*!question-new:widget/answer-share/answer-share.js*/
define("question-new:widget/answer-share/answer-share",function(e,t){{var n=e("common:widget/js/util/tangram/tangram"),a=(e("common:widget/js/util/log/log"),e("common:widget/js/logic/share/share"));n(".answer-share-widget")}t.init=function(e){var t=".answer-share-"+e.id;a.init({target:n(t),pageUrl:"http://zhidao.baidu.com/question/"+F.context("page").qid,title:document.title,summary:e.content,logOpt:{module:"question",page:"qb",project:"new-qb-share",postion:"new-share"}})}});
;/*!question-new:widget/ask/share/share.js*/
define("question-new:widget/ask/share/share",function(i,e){function t(i){var e=["toolbar=0,status=0,resizable=1,width=",i.width||440,",height=",i.height||430,",left=",(screen.width-(i.width||440))/2,",top=",(screen.height-(i.height||430))/2].join("");window.open(i.url,"shareWindow",e)||(location.href=i.url)}function o(i,e){var t={render:document.createElement("canvas").getContext?"canvas":"table",width:e.width,height:e.height,text:e.href};F.context("weixinShareTinyUrl")?(t.text=F.context("weixinShareTinyUrl"),i.qrcode(t)):n.ajax({url:"/api/gettinyurl",type:"POST",dataType:"json",data:{url:e.href}}).done(function(e){var o=e.data;0==e.errno?(F.context("weixinShareTinyUrl",o.tinyurl),t.text=o.tinyurl,i.qrcode(t)):i.qrcode(t)}).fail(function(){i.qrcode(t)})}var n=i("common:widget/js/util/tangram/tangram"),a=i("common:widget/js/ui/tip/tip"),s=i("common:widget/js/util/log/log");i("common:widget/js/logic/qrcode/qrcode"),e.init=function(i){if(i.target&&i.pageUrl&&i.title){var e=n(i.target),r=i.pageUrl,c=-1==r.indexOf("?")?"?":"&";e.on("tooltipopen",function(e,t){n(this).addClass("tips-open"),o(t.tooltip.find(".weixin-qrcode-img"),{width:100,height:100,href:r+c+"sharesource=weixin"}),i.logOpt&&(i.logOpt.action="share-view",s.send(i.logOpt))}),e.on("tooltipclose",function(){n(this).removeClass("tips-open")}),e.on("click",".others-share-item",function(e){if(e.preventDefault(),!n(this).hasClass("weixin")){var o=n(this),a={url:o.attr("href")};o.hasClass("weibo")||(a.width=800,a.height=600),t(a),i.logOpt&&(i.logOpt.action="share-click-"+o.data("type"),s.send(i.logOpt))}});var h={url:r+c+"sharesource=qq",title:i.title,pics:i.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"},l={url:r+c+"sharesource=qzone",title:i.title,pics:i.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"},d={url:r+c+"sharesource=weibo",title:i.weiboTitle||i.title,pic:i.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"};i.summary&&(h.summary=i.summary,l.summary=i.summary,d.summary=i.summary);var p=[],g=[],m=[];for(var u in h)p.push(u+"="+encodeURIComponent(h[u]||""));for(var u in l)g.push(u+"="+encodeURIComponent(l[u]||""));for(var u in d)m.push(u+"="+encodeURIComponent(d[u]||""));var w="http://connect.qq.com/widget/shareqq/index.html?"+p.join("&"),f="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+g.join("&"),q="http://v.t.sina.com.cn/share/share.php?"+m.join("&"),v=['<div class="others-share">','<a href="javascript:void(0)" target="_blank" class="others-share-item weixin iknow-qb_share_icons" data-type="weixin-click"><span class="logo"></span></a>','<a href="'+q+'" target="_blank" class="others-share-item weibo iknow-qb_share_icons" data-type="weibo-click"><span class="logo"></span></a>','<a href="'+w+'" target="_blank" class="others-share-item qq iknow-qb_share_icons" data-type="qq-click"><span class="logo"></span></a>','<a href="'+f+'" target="_blank" class="others-share-item qzone iknow-qb_share_icons" data-type="qzone-click"><span class="logo"></span></a>',"</div>"].join("");e.html(v);var x,b,y=['<div class="weixin-container">','<div class="weixin-qrcode">','<div class="weixin-qrcode-img"></div>','<p class="weixin-qrcode-title">扫一扫分享到微信</p>',"</div>",'<div class="weixin-qrcode-lead"></div>',"</div>"].join(""),k={direction:"rightSilde"==i.pos?"right":"top",tooltipClass:"wgt-common-share-tip",content:y,target:e.find(".weixin")[0],position:{my:"rightSilde"==i.pos?"left-180 top":"left top+5",at:"rightSilde"==i.pos?"left-80 bottom-45":"left-80 bottom+5"}},_=n.extend(!0,k,i.tipsOpt);e.find(".weixin").hover(function(){clearTimeout(b),(x||(x=new a(_))).show(),x.getTipContainer().hover(function(){clearTimeout(b)},function(){b=setTimeout(function(){x.hide()},100)})},function(){b=setTimeout(function(){x.hide()},100)})}}});
;/*!question-new:widget/dom-ready/dom-ready.js*/
define("question-new:widget/dom-ready/dom-ready",function(n,e,t){var o=(n("common:widget/js/util/tangram/tangram"),n("common:widget/js/util/log/log"));t.exports={init:function(){o.send({page:"question",action:"entrance"})}}});
;/*!question-new:widget/waiting-answers/waiting-answers.js*/
define("question-new:widget/waiting-answers/waiting-answers",function(require,exports,module){var $=require("common:widget/js/util/tangram/tangram"),ec=require("common:widget/js/util/event/event"),log=require("common:widget/js/util/log/log"),Submit=require("common:widget/js/logic/submit/submit"),popTip=require("common:widget/js/ui/pop-tip/pop-tip"),AnswerDialog=require("question-new:widget/js/answer-dialog/answer-dialog");module.exports={init:function(entry){var me=this;me.authcode=null,me.wrapper=$(".waiting-answers-wp"),me.listTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");for(var i=0;i<data.length;i++)_template_fun_array.push('<li class="waiting-item" data-id="',"undefined"==typeof data[i].qid?"":baidu.template._encodeHTML(data[i].qid),'" data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'">    <div class="waiting-user smooth">'),data[i].isAnonymous||data[i].isNoUserName?_template_fun_array.push("热心网友"):_template_fun_array.push("","undefined"==typeof data[i].uname?"":baidu.template._encodeHTML(data[i].uname),""),_template_fun_array.push('问：</div>    <div class="waiting-question">        '),data[i].score>0&&_template_fun_array.push('            <i class="iknow-icons">&#xe652;</i>            <span class="waiting-span">',"undefined"==typeof data[i].score?"":baidu.template._encodeHTML(data[i].score),"</span>        "),_template_fun_array.push('        <a data-qid="',"undefined"==typeof data[i].qid?"":baidu.template._encodeHTML(data[i].qid),'" href="/question/',"undefined"==typeof data[i].qid?"":baidu.template._encodeHTML(data[i].qid),"?push=4&entry=","undefined"==typeof entry?"":baidu.template._encodeHTML(entry),'refer" target="_blank">'),data[i].title.length>34?_template_fun_array.push("","undefined"==typeof data[i].title.substr(0,34)?"":data[i].title.substr(0,34),"..."):_template_fun_array.push("","undefined"==typeof data[i].title?"":data[i].title,""),_template_fun_array.push('</a>    </div>    <div class="waiting-bottom">        <div class="waiting-submit-btn" data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'"><i class="iknow-icons">&#xe665;</i><span>回答</span></div>    </div></li>');_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],me.fetchData(),me.entry=entry||"qb_qb_wait",me.firstLoading=!0,this.bindEvents()},fetchData:function(){var e=this;e.wrapper.find(".waiting-answers-ul").addClass("hidden"),$.ajax({url:"/question/api/qfeedlist",data:{rn:3,t:+new Date},type:"get",dataType:"json"}).done(function(a){0===a.errno&&setTimeout(function(){e.renderList(a)},500)})},renderList:function(e){var a=this;a.wrapper.removeClass("hidden"),a.data=e.data,e.entry=a.entry,a.wrapper.find(".waiting-answers-ul").html(a.listTmpl(e)).removeClass("hidden"),a.wrapper.find(".waiting-answers-change").removeClass("loading"),a.firstLoading&&(a.firstLoading=!1,a.initScroll())},bindEvents:function(){var e=this;e.wrapper.on("click",".waiting-submit-btn",function(){var a=$(this);if(!a.hasClass("disable")){log.send({module:"question",page:"question",area:"qb-side-wait-answer-submit",action:"click",entry:e.entry});var t=a.data("index");e.data[t]&&(e.dialog=new AnswerDialog({entry:e.entry,data:e.data[t],callback:function(){popTip("您的回答已提交成功"),a.find("span").text("已回答").parent().addClass("disable")}}))}}).on("click",".waiting-answers-change",function(){$(this).hasClass("loading")||(log.send({module:"question",page:"question",area:"qb-side-wait-answer-change",action:"click",entry:e.entry}),$(this).addClass("loading"),e.fetchData())}).on("click",".waiting-question a",function(){var a=$(this).data("qid");$.ajax({type:"get",dataType:"json",data:{qid:a,fromfeed:3},url:"/submit/questionclick"}),log.send({module:"question",page:"question",area:"qb-side-wait-answer-qtitle",action:"click",entry:e.entry})})},initScroll:function(){var e=this;$(window).on("resize scroll",function(){e.setRecPosition()})},setRecPosition:function(){var e=this,a=e.wrapper.find(".waiting-answers-content"),t=a.height(),i=$(window).scrollTop(),n=$(".qb-side").offset().top+$(".qb-side").height()-60;i>n&&!a.hasClass("waiting-answers-fixed")?(e.wrapper.css({height:t+39+"px"}),a.addClass("waiting-answers-fixed")):a.hasClass("waiting-answers-fixed")&&n>i&&(e.wrapper.css({height:"auto"}),a.removeClass("waiting-answers-fixed"))}}});